<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>旅途</title>
  
  <subtitle>NIEF&#39;s Blog</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2021-03-31T09:09:41.708Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>NIEF</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>使用hexo创建博客</title>
    <link href="http://yoursite.com/2019/gitpage%20hexo%20maupassant.html"/>
    <id>http://yoursite.com/2019/gitpage hexo maupassant.html</id>
    <published>2019-08-20T00:00:00.000Z</published>
    <updated>2021-03-31T09:09:41.708Z</updated>
    
    <content type="html"><![CDATA[<!-- # 个人博客 --><ul><li>在github上新建一个以git账号为前缀的仓库，如<code>shineniefei.github.io</code>  </li><li>在本地工作目录，使用git克隆<code>git clone git@github.com:shineniefei/shineniefei.github.io.git</code> 把代码下到本地  </li><li>安装node  </li><li>安装 hexo，<code>npm install -g hexo-cli</code>  </li><li>初始化 <code>hexo init shineniefei.github.io</code>  </li><li>进入目录，<code>cd shineniefei.github.io</code>  </li><li>使用themes，<code>git clone https://github.com/tufu9441/maupassant-hexo.git themes/maupassant</code>  </li><li><code>npm install hexo-renderer-pug --save</code>  </li><li><code>npm install hexo-renderer-sass --save</code>  </li><li><code>npm install hexo-deployer-git --save</code>  </li><li><p>在_config.yml配置使用themes, maupassant</p><p>  (rm -rf themes/maupassant<br>  git rm -r –cached themes/maupassant<br>  git add themes/maupassant)</p></li><li><p>在source/_posts里写md文章  </p></li><li>使用 hexo clean &amp;&amp; hexo g &amp;&amp; hexo d 更新到master  </li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- # 个人博客 --&gt;
&lt;ul&gt;
&lt;li&gt;在github上新建一个以git账号为前缀的仓库，如&lt;code&gt;shineniefei.github.io&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;在本地工作目录，使用git克隆&lt;code&gt;git clone git@github.c
      
    
    </summary>
    
      <category term="tool" scheme="http://yoursite.com/categories/tool/"/>
    
    
      <category term="gitpages hexo gittalk" scheme="http://yoursite.com/tags/gitpages-hexo-gittalk/"/>
    
  </entry>
  
  <entry>
    <title>mq python pika</title>
    <link href="http://yoursite.com/2019/python3%20mq%20pika.html"/>
    <id>http://yoursite.com/2019/python3 mq pika.html</id>
    <published>2019-07-29T16:00:00.000Z</published>
    <updated>2021-03-31T09:09:41.708Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pika</span><br><span class="line"></span><br><span class="line">username = <span class="string">'username'</span></span><br><span class="line">password = <span class="string">'password'</span></span><br><span class="line">host = <span class="string">'127.0.0.1'</span></span><br><span class="line">port = <span class="number">5672</span></span><br><span class="line">vhost = <span class="string">'/vhost'</span></span><br><span class="line">queue = <span class="string">'request'</span></span><br><span class="line">body = <span class="string">'&#123;"type":null,"body":[&#123;"contractNo":"111","masFlag":"N"&#125;]&#125;'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># parameters = pika.URLParameters(</span></span><br><span class="line"><span class="comment">#     f'amqp://&#123;username&#125;:&#123;password&#125;@&#123;host&#125;:&#123;port&#125;/&#123;vhost&#125;')</span></span><br><span class="line">credentials = pika.PlainCredentials(username, password)</span><br><span class="line"></span><br><span class="line">parameters = pika.ConnectionParameters(</span><br><span class="line">    host=host, port=port, virtual_host=vhost, credentials=credentials)</span><br><span class="line"></span><br><span class="line">properties = pika.spec.BasicProperties(content_type=<span class="string">"text/plain"</span>)</span><br><span class="line"></span><br><span class="line">conn = pika.BlockingConnection(parameters)</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">with</span> conn.channel() <span class="keyword">as</span> chan:</span><br><span class="line">        <span class="comment"># chan.queue_declare(queue=queue)  # 声明一个队列</span></span><br><span class="line">        <span class="comment"># chan.exchange_declare(exchange='CREDITHC_CS', exchange_type='direct')</span></span><br><span class="line">        chan.basic_publish(</span><br><span class="line">            exchange=<span class="string">''</span>,</span><br><span class="line">            routing_key=queue,</span><br><span class="line">            properties=properties,</span><br><span class="line">            body=body,</span><br><span class="line">        )</span><br><span class="line">        print(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">except</span> Exception:</span><br><span class="line">    <span class="keyword">raise</span></span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    conn.close()</span><br></pre></td></tr></table></figure><p>if <strong>name</strong> == <strong>main</strong>:</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span clas
      
    
    </summary>
    
      <category term="code" scheme="http://yoursite.com/categories/code/"/>
    
    
      <category term="python3" scheme="http://yoursite.com/tags/python3/"/>
    
      <category term="pika" scheme="http://yoursite.com/tags/pika/"/>
    
  </entry>
  
  <entry>
    <title>python3_algorithm_sort</title>
    <link href="http://yoursite.com/2019/python3_algorithm_sort.html"/>
    <id>http://yoursite.com/2019/python3_algorithm_sort.html</id>
    <published>2019-06-28T00:00:00.000Z</published>
    <updated>2019-11-22T08:42:10.142Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bubble_sort</span><span class="params">()</span>:</span></span><br><span class="line">    a_list = [<span class="number">2</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">0</span>]</span><br><span class="line">    <span class="keyword">if</span> a_list:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(a_list) - <span class="number">1</span>):  <span class="comment"># 从零下标开始</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(len(a_list) - i - <span class="number">1</span>):</span><br><span class="line">                <span class="keyword">if</span> a_list[j] &gt; a_list[j + <span class="number">1</span>]:  <span class="comment"># 左边大于右边的,交换位置</span></span><br><span class="line">                    a_list[j], a_list[j + <span class="number">1</span>] = a_list[j + <span class="number">1</span>], a_list[j]</span><br><span class="line">                    print(a_list)</span><br><span class="line">    <span class="keyword">return</span> a_list</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">select_sort</span><span class="params">()</span>:</span></span><br><span class="line">    a_list = [<span class="number">2</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">0</span>]</span><br><span class="line">    <span class="keyword">if</span> a_list:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(a_list)):</span><br><span class="line">            min_index = i</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(i + <span class="number">1</span>, len(a_list)):</span><br><span class="line">                <span class="keyword">if</span> a_list[min_index] &gt; a_list[j]:</span><br><span class="line">                    min_index = j</span><br><span class="line">            a_list[min_index], a_list[i] = a_list[i], a_list[min_index]</span><br><span class="line">            print(a_list)</span><br><span class="line">    <span class="keyword">return</span> a_list</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">insert_sort</span><span class="params">()</span>:</span></span><br><span class="line">    a_list = [<span class="number">2</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">0</span>]</span><br><span class="line">    <span class="keyword">if</span> a_list:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, len(a_list)):</span><br><span class="line">            tem = a_list[i]</span><br><span class="line">            j = i - <span class="number">1</span></span><br><span class="line">            <span class="keyword">while</span> j &gt;= <span class="number">0</span> <span class="keyword">and</span> a_list[j] &gt; tem:</span><br><span class="line">                a_list[j + <span class="number">1</span>] = a_list[j]</span><br><span class="line">                j -= <span class="number">1</span></span><br><span class="line">            a_list[j + <span class="number">1</span>] = tem</span><br><span class="line">            print(a_list)</span><br><span class="line">    <span class="keyword">return</span> a_list</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span clas
      
    
    </summary>
    
      <category term="algorithm" scheme="http://yoursite.com/categories/algorithm/"/>
    
    
      <category term="algorithm" scheme="http://yoursite.com/tags/algorithm/"/>
    
      <category term="sort" scheme="http://yoursite.com/tags/sort/"/>
    
  </entry>
  
  <entry>
    <title>tools config vim vimrc</title>
    <link href="http://yoursite.com/2019/tools%20config%20vim%20vimrc.html"/>
    <id>http://yoursite.com/2019/tools config vim vimrc.html</id>
    <published>2019-05-16T16:00:00.000Z</published>
    <updated>2019-11-22T08:42:10.153Z</updated>
    
    <content type="html"><![CDATA[<h2 id="vimrc"><a href="#vimrc" class="headerlink" title="vimrc"></a>vimrc</h2><p>windows下，打开gvim,使用<code>:vi $vim/_vimrc</code>打开配置文件:e $vim/_vimrc</p><p>linux下，使用<code>vi ~/.vimrc</code>打开配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> nocompatible            <span class="string">"不要使用vi的键盘模式，而是vim自己的  </span></span><br><span class="line"><span class="string">set gfn=Consolas:h12            "</span>字体，大小</span><br><span class="line"><span class="built_in">set</span> nu            <span class="string">"显示行号</span></span><br><span class="line"><span class="string">set list            "</span>显示TAB</span><br><span class="line"><span class="built_in">set</span> cursorline            <span class="string">"突出显示当前行"</span>为光标所在行加下划线</span><br><span class="line"><span class="built_in">set</span> encoding=utf-8            <span class="string">"编码</span></span><br><span class="line"><span class="string">set fileencodings=uft-8,gbk            "</span>使用utf-8或gbk打开文件</span><br><span class="line">filetype on            <span class="string">"侦测文件类型</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">set shortmess=atI            "</span>不进入默认首页</span><br><span class="line"><span class="built_in">set</span> showcmd            <span class="string">"显示命令行</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span><span class="built_in">set</span> backup            <span class="string">"保留备份文件</span></span><br><span class="line"><span class="string">"</span><span class="built_in">set</span> backupdir=<span class="variable">$VIM</span>/backup/            <span class="string">"保存备份到backup</span></span><br><span class="line"><span class="string">set nobackup            "</span>不保留备份文件</span><br><span class="line"><span class="built_in">set</span> noundofile            <span class="string">"不保留un~文件</span></span><br><span class="line"><span class="string">set noswapfile            "</span>不生成swap文件</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> ruler            <span class="string">"打开状态栏标尺</span></span><br><span class="line"><span class="string">set laststatus=2            "</span>总是显示状态行</span><br><span class="line"><span class="built_in">set</span> showtabline=1            <span class="string">"标签栏的显示，0永远不显示 1两个以上显示 2 永远显示</span></span><br><span class="line"><span class="string">set statusline=%F%m%r%h%w\[POS=%l,%v][%p%%]\%&#123;strftime(\"%d/%m/%y\ -\ %H:%M\")&#125;   "</span>我的状态行显示的内容（包括文件类型和解码）  </span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> nowrapscan            <span class="string">"禁止在搜索到文件两端时重新搜索</span></span><br><span class="line"><span class="string">set incsearch            "</span>输入搜索内容时就显示搜索结果</span><br><span class="line"><span class="built_in">set</span> ignorecase            <span class="string">"检索时忽略大小写</span></span><br><span class="line"><span class="string">set hlsearch            "</span>搜索时高亮显示被找到的文本</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> autoread            <span class="string">"当文件在外部被修改时，自动重新读取</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">colorscheme desert            "</span>设定配色方案</span><br><span class="line">syntax <span class="built_in">enable</span>            <span class="string">"打开格式设置</span></span><br><span class="line"><span class="string">syntax on            "</span>自动语法高亮</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> ai            <span class="string">"自动缩进</span></span><br><span class="line"><span class="string">set showmatch            "</span>代码匹配<span class="string">"高亮显示匹配的括号 </span></span><br><span class="line"><span class="string">set matchtime=5            "</span>匹配括号高亮的时间（单位是十分之一秒）  </span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> expandtab            <span class="string">"以下三个配置配合使用，设置tab和缩进空格数</span></span><br><span class="line"><span class="string">set softtabstop=4            "</span>统一缩进为4</span><br><span class="line"><span class="built_in">set</span> shiftwidth=4</span><br><span class="line"><span class="built_in">set</span> tabstop=4            <span class="string">"设定 tab 长度为 4</span></span><br><span class="line"><span class="string">"</span><span class="built_in">set</span> listchars=tab:&gt;-,trail:            <span class="string">"tab显示方式</span></span><br><span class="line"><span class="string">"</span><span class="built_in">set</span> noexpandtab            <span class="string">"不要用空格代替制表符  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">set helplang=cn            "</span>帮助系统设置为中文</span><br><span class="line"></span><br><span class="line"><span class="string">"set nowrap            "</span>不要换行  </span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> foldmethod=syntax            <span class="string">"代码折叠</span></span><br><span class="line"><span class="string">set fdm=indent            "</span>代码折叠</span><br><span class="line"><span class="built_in">set</span> foldlevel=100            <span class="string">"启动vim时不要自动折叠代码</span></span><br><span class="line"><span class="string">nnoremap &lt;space&gt; zo            "</span>代码折叠快捷键</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> formatoptions=tcrqn            <span class="string">"自动格式化  </span></span><br><span class="line"><span class="string">set autoindent            "</span>继承前一行的缩进方式，特别适用于多行注释</span><br><span class="line"><span class="built_in">set</span> smartindent            <span class="string">"为C程序提供自动缩进  </span></span><br><span class="line"><span class="string">set cindent            "</span>使用C样式的缩进  </span><br><span class="line"><span class="built_in">set</span> smarttab            <span class="string">"在行和段开始处使用制表符  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">set scrolloff=1            "</span>光标移动到buffer的顶部和底部时保持n行距离</span><br><span class="line"><span class="built_in">set</span> novisualbell            <span class="string">"不要闪烁  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">set report=0            "</span>通过使用: commands命令，告诉我们文件的哪一行被改变过  </span><br><span class="line"><span class="built_in">set</span> noerrorbells            <span class="string">"不让vim发出讨厌的滴滴声  </span></span><br><span class="line"><span class="string">set fillchars=vert:\ ,stl:\            "</span>在被分割的窗口间显示空白，便于阅读 ,stlnc:加了这个wm分割兰有\\</span><br><span class="line"><span class="built_in">set</span> mouse=a            <span class="string">"可以在buffer的任何地方使用鼠标（类似office中在工作区双击鼠标定位）  </span></span><br><span class="line"><span class="string">set selection=exclusive</span></span><br><span class="line"><span class="string">set selectmode=mouse,key</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">set viminfo+=!            "</span>保存全局变量  </span><br><span class="line"><span class="built_in">set</span> <span class="built_in">history</span>=300            <span class="string">"history文件中需要记录的行数  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">set magic            "</span>设置正表达式  </span><br><span class="line"><span class="built_in">set</span> backspace=indent,eol,start  <span class="string">"这指明在插入模式下在哪里允许 &lt;BS&gt; 删除光标前面的字符"</span>逗号分隔的三个值分别指：行首的空白字符，换行符和插入模式开始处之前的字符。  </span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> Tlist_Show_One_File=1    <span class="string">"不同时显示多个文件的tag，只显示当前文件的  </span></span><br><span class="line"><span class="string">let Tlist_Exit_OnlyWindow=1    "</span>如果taglist窗口是最后一个窗口,则退出vim</span><br><span class="line"><span class="built_in">let</span> autosave=15            <span class="string">"15s,自动保存文件</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">au BufRead,BufNewFile,BufEnter * cd %:p:h "</span>自动切换目录为当前编辑文件所在目录</span><br><span class="line"><span class="string">"保存到文档</span></span><br><span class="line"><span class="string">exec 'cd ' . fnameescape('<span class="variable">$HOME</span>\Desktop\')</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">if has("</span>gui_running<span class="string">")            "</span>如果是图形界面</span><br><span class="line">    <span class="built_in">set</span> guioptions=m            <span class="string">"关闭菜单栏</span></span><br><span class="line"><span class="string">    set guioptions=t            "</span>关闭工具栏</span><br><span class="line"><span class="string">"  set guioptions=L            "</span>启动左边的滚动条</span><br><span class="line"><span class="string">"  set guioptions+=r            "</span>启动右边的滚动条</span><br><span class="line"><span class="string">"  set guioptions+=b            "</span>启动下边的滚动条</span><br><span class="line">    <span class="built_in">set</span> clipboard+=unnamed            <span class="string">"共享剪贴板</span></span><br><span class="line"><span class="string">endif</span></span><br><span class="line"><span class="string">"</span><span class="keyword">if</span> has(<span class="string">"win32"</span>)  </span><br><span class="line"> <span class="string">"   colorscheme torte    "</span>torte配色方案</span><br><span class="line">  <span class="string">"  set guifont=Consolas:h12 "</span>字体和大小</span><br><span class="line"><span class="string">"endif</span></span><br><span class="line"><span class="string">"</span>------------------------------------------------------</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"Go to last file(s) if invoked without arguments.</span></span><br><span class="line"><span class="string">autocmd VimLeave * nested if (!isdirectory(<span class="variable">$HOME</span> . "</span>/.vim<span class="string">")) |</span></span><br><span class="line"><span class="string">    \ call mkdir(<span class="variable">$HOME</span> . "</span>/.vim<span class="string">") |</span></span><br><span class="line"><span class="string">    \ endif |</span></span><br><span class="line"><span class="string">    \ execute "</span>mksession! <span class="string">". <span class="variable">$HOME</span> . "</span>/.vim/Session.vim<span class="string">"</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">autocmd VimEnter * nested if argc() == 0 &amp;&amp; filereadable(<span class="variable">$HOME</span> . "</span>/.vim/Session.vim<span class="string">") |</span></span><br><span class="line"><span class="string">    \ execute "</span><span class="built_in">source</span> <span class="string">". <span class="variable">$HOME</span> . "</span>/.vim/Session.vim<span class="string">"</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"MiniBufExplorer</span></span><br><span class="line"><span class="string">let g:miniBufExplMapWindowNavVim = 1</span></span><br><span class="line"><span class="string">let g:miniBufExplMapWindowNavArrows = 1</span></span><br><span class="line"><span class="string">let g:miniBufExplMapCTabSwitchBufs = 1</span></span><br><span class="line"><span class="string">let g:miniBufExplModSelTarget = 1</span></span><br></pre></td></tr></table></figure><h2 id="gvim不生成备份文件"><a href="#gvim不生成备份文件" class="headerlink" title="gvim不生成备份文件"></a>gvim不生成备份文件</h2><p>打开vimrc_example.vim文件，找到下面的代码：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if has("vms")</span><br><span class="line">    set nobackup "do not keep a backup file, use versions instead</span><br><span class="line">else</span><br><span class="line">    set backup "keep a backup file</span><br><span class="line">endif</span><br></pre></td></tr></table></figure><p>注释掉else后面的内容</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;vimrc&quot;&gt;&lt;a href=&quot;#vimrc&quot; class=&quot;headerlink&quot; title=&quot;vimrc&quot;&gt;&lt;/a&gt;vimrc&lt;/h2&gt;&lt;p&gt;windows下，打开gvim,使用&lt;code&gt;:vi $vim/_vimrc&lt;/code&gt;打开配置文件:e $vi
      
    
    </summary>
    
      <category term="tools" scheme="http://yoursite.com/categories/tools/"/>
    
    
      <category term="vim" scheme="http://yoursite.com/tags/vim/"/>
    
      <category term="vimrc" scheme="http://yoursite.com/tags/vimrc/"/>
    
  </entry>
  
  <entry>
    <title>windows 下安装 mongodb zip</title>
    <link href="http://yoursite.com/2019/windows%20install%20mongodb.html"/>
    <id>http://yoursite.com/2019/windows install mongodb.html</id>
    <published>2019-05-16T16:00:00.000Z</published>
    <updated>2019-11-22T08:42:10.166Z</updated>
    
    <content type="html"><![CDATA[<h2 id="下载mongodb-zip版"><a href="#下载mongodb-zip版" class="headerlink" title="下载mongodb zip版"></a>下载mongodb zip版</h2><p><code>https://fastdl.mongodb.org/win32/mongodb-win32-x86_64-2008plus-ssl-4.0.9.zip</code></p><h2 id="解压到指定目录如D-DB"><a href="#解压到指定目录如D-DB" class="headerlink" title="解压到指定目录如D:\DB"></a>解压到指定目录如<code>D:\DB</code></h2><p>完成后目录为<code>D:\DB\mongodb-4.0.9</code></p><h2 id="创建数据目录文件夹"><a href="#创建数据目录文件夹" class="headerlink" title="创建数据目录文件夹"></a>创建数据目录文件夹</h2><p>完成后目录为<code>D:\DB\mongodb-4.0.9\data</code></p><h2 id="创建配置文件mongod-cfg"><a href="#创建配置文件mongod-cfg" class="headerlink" title="创建配置文件mongod.cfg"></a>创建配置文件<code>mongod.cfg</code></h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">systemLog:</span></span><br><span class="line"><span class="attr">  destination:</span> <span class="string">file</span></span><br><span class="line"><span class="attr">  path:</span> <span class="attr">D:\DB\mongodb-4.0.9\MongoDB.log</span></span><br><span class="line"><span class="attr">storage:</span></span><br><span class="line"><span class="attr">  dbPath:</span> <span class="attr">D:\DB\mongodb-4.0.9\data</span></span><br><span class="line"><span class="attr">net:</span></span><br><span class="line"><span class="attr">  bindIp:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">,0.0.0.0</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">27017</span></span><br></pre></td></tr></table></figure><h2 id="安装为windows服务"><a href="#安装为windows服务" class="headerlink" title="安装为windows服务"></a>安装为windows服务</h2><p>在<code>D:\DB\mongodb-4.0.9\bin</code>打开命令行</p><p><code>mongod.exe --config D:\DB\mongodb-4.0.9\mongod.cfg --install</code></p><h2 id="启动-停止-删除服务"><a href="#启动-停止-删除服务" class="headerlink" title="启动/停止/删除服务"></a>启动/停止/删除服务</h2><p><code>net start MongoDB</code></p><p><code>net stop MongoDB</code></p><p><code>D:\DB\mongodb-4.0.9\bin\mongod.exe --remove</code></p><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p><code>mongo.exe</code></p><p><code>db</code></p><p><code>use admin</code></p><p><code>db.createUser({user: &quot;root&quot;,pwd: &quot;root&quot;,roles: [ { role: &quot;userAdminAnyDatabase&quot;, db: &quot;admin&quot; } ]})</code></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;下载mongodb-zip版&quot;&gt;&lt;a href=&quot;#下载mongodb-zip版&quot; class=&quot;headerlink&quot; title=&quot;下载mongodb zip版&quot;&gt;&lt;/a&gt;下载mongodb zip版&lt;/h2&gt;&lt;p&gt;&lt;code&gt;https://fastdl.m
      
    
    </summary>
    
      <category term="windows" scheme="http://yoursite.com/categories/windows/"/>
    
    
      <category term="windows" scheme="http://yoursite.com/tags/windows/"/>
    
      <category term="mongodb" scheme="http://yoursite.com/tags/mongodb/"/>
    
  </entry>
  
  <entry>
    <title>tools config vscode User Settings</title>
    <link href="http://yoursite.com/2019/tools%20config%20vscode%20User%20Settings.html"/>
    <id>http://yoursite.com/2019/tools config vscode User Settings.html</id>
    <published>2019-05-10T16:00:00.000Z</published>
    <updated>2019-11-22T08:42:10.155Z</updated>
    
    <content type="html"><![CDATA[<p>vscode 用户配置文件</p><p>windows下，配置python3，php，flake8，git等</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"editor.fontFamily"</span>: <span class="string">"Consolas, monospace"</span>,</span><br><span class="line">    <span class="attr">"editor.fontSize"</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">"editor.detectIndentation"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"editor.renderControlCharacters"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"editor.renderWhitespace"</span>: <span class="string">"all"</span>,</span><br><span class="line">    <span class="attr">"editor.tabSize"</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="attr">"editor.minimap.enabled"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"editor.wordWrap"</span>: <span class="string">"on"</span>,</span><br><span class="line">    <span class="attr">"explorer.confirmDragAndDrop"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"explorer.confirmDelete"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"terminal.integrated.shell.windows"</span>: <span class="string">"C:\\Windows\\System32\\cmd.exe"</span>,</span><br><span class="line">    <span class="attr">"git.path"</span>: <span class="string">"D:/IDE/PortableGit/bin/git.exe"</span>,</span><br><span class="line">    <span class="attr">"git.autofetch"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"git.confirmSync"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"git.enableSmartCommit"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"git.autorefresh"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"php.validate.executablePath"</span>: <span class="string">"D:/IDE/php-5.6/php.exe"</span>,</span><br><span class="line">    <span class="attr">"python.pythonPath"</span>: <span class="string">"D:/IDE/Python37/python.exe"</span>,</span><br><span class="line">    <span class="attr">"python.formatting.provider"</span>: <span class="string">"yapf"</span>,</span><br><span class="line">    <span class="attr">"python.formatting.yapfPath"</span>: <span class="string">"D:/IDE/Python37/Scripts/yapf.exe"</span>,</span><br><span class="line">    <span class="attr">"python.linting.flake8Enabled"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"python.linting.flake8Path"</span>: <span class="string">"flake8"</span>,</span><br><span class="line">    <span class="attr">"files.exclude"</span>: &#123;</span><br><span class="line">        <span class="attr">"**/__pycache__"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"**/.__pycache__"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"**/.pyc"</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"launch"</span>: &#123;</span><br><span class="line">        <span class="attr">"configurations"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"Python: Current File (Integrated Terminal)"</span>,</span><br><span class="line">                <span class="attr">"type"</span>: <span class="string">"python"</span>,</span><br><span class="line">                <span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">                <span class="attr">"program"</span>: <span class="string">"$&#123;file&#125;"</span>,</span><br><span class="line">                <span class="attr">"console"</span>: <span class="string">"integratedTerminal"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"Python: Current File (console Terminal)"</span>,</span><br><span class="line">                <span class="attr">"type"</span>: <span class="string">"python"</span>,</span><br><span class="line">                <span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">                <span class="attr">"program"</span>: <span class="string">"$&#123;file&#125;"</span>,</span><br><span class="line">                <span class="attr">"console"</span>: <span class="string">"internalConsole"</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"Python: Current File (External Terminal)"</span>,</span><br><span class="line">                <span class="attr">"type"</span>: <span class="string">"python"</span>,</span><br><span class="line">                <span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">                <span class="attr">"program"</span>: <span class="string">"$&#123;file&#125;"</span>,</span><br><span class="line">                <span class="attr">"console"</span>: <span class="string">"externalTerminal"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"type"</span>: <span class="string">"chrome"</span>,</span><br><span class="line">                <span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"vuejs: chrome"</span>,</span><br><span class="line">                <span class="attr">"url"</span>: <span class="string">"http://localhost:8080"</span>,</span><br><span class="line">                <span class="attr">"webRoot"</span>: <span class="string">"$&#123;workspaceFolder&#125;/src"</span>,</span><br><span class="line">                <span class="attr">"breakOnLoad"</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">"sourceMapPathOverrides"</span>: &#123;</span><br><span class="line">                    <span class="attr">"webpack:///./src/*"</span>: <span class="string">"$&#123;webRoot&#125;/*"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            // $&#123;workspaceRoot&#125; the path of the folder opened in VS Code(VSCode中打开文件夹的路径)</span><br><span class="line">            // $&#123;workspaceRootFolderName&#125; the name of the folder opened in VS Code without any solidus (/)(VSCode中打开文件夹的路径, 但不包含"/")</span><br><span class="line">            // $&#123;file&#125; the current opened file(当前打开的文件)</span><br><span class="line">            // $&#123;relativeFile&#125; the current opened file relative to workspaceRoot(当前打开的文件,相对于workspaceRoot)</span><br><span class="line">            // $&#123;fileBasename&#125; the current opened file's basename(当前打开文件的文件名, 不含扩展名)</span><br><span class="line">            // $&#123;fileDirname&#125; the current opened file's dirname(当前打开文件的目录名)</span><br><span class="line">            // $&#123;fileExtname&#125; the current opened file's extension(当前打开文件的扩展名)</span><br><span class="line">            // $&#123;cwd&#125; the task runner's current working directory on startup()</span><br><span class="line">            // &#123;</span><br><span class="line">            //     "name": "Listen for XDebug",</span><br><span class="line">            //     "type": "php",</span><br><span class="line">            //     "request": "launch",</span><br><span class="line">            //     "port": 9000</span><br><span class="line">            // &#125;,</span><br><span class="line">            // &#123;</span><br><span class="line">            //     "name": "Launch currently open script",</span><br><span class="line">            //     "type": "php",</span><br><span class="line">            //     "request": "launch",</span><br><span class="line">            //     "program": "$&#123;file&#125;",</span><br><span class="line">            //     "cwd": "$&#123;fileDirname&#125;",</span><br><span class="line">            //     "port": 9000</span><br><span class="line">            // &#125;</span><br><span class="line">        ],</span><br><span class="line">        "compounds": []</span><br><span class="line">    &#125;,</span><br><span class="line">    "telemetry.enableCrashReporter": false,</span><br><span class="line">    "telemetry.enableTelemetry": false,</span><br><span class="line">    "python.jediEnabled": false,</span><br><span class="line">    "editor.suggestSelection": "first",</span><br><span class="line">    "vsintellicode.modify.editor.suggestSelection": "automaticallyOverrodeDefaultValue",</span><br><span class="line">    "java.configuration.checkProjectSettingsExclusions": false,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;vscode 用户配置文件&lt;/p&gt;
&lt;p&gt;windows下，配置python3，php，flake8，git等&lt;/p&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;lin
      
    
    </summary>
    
      <category term="tools" scheme="http://yoursite.com/categories/tools/"/>
    
    
      <category term="vscode" scheme="http://yoursite.com/tags/vscode/"/>
    
      <category term="setting" scheme="http://yoursite.com/tags/setting/"/>
    
  </entry>
  
  <entry>
    <title>linux ntp 配置</title>
    <link href="http://yoursite.com/2019/linux%20ntp%E9%85%8D%E7%BD%AE.html"/>
    <id>http://yoursite.com/2019/linux ntp配置.html</id>
    <published>2019-04-21T16:00:00.000Z</published>
    <updated>2019-11-22T08:42:10.126Z</updated>
    
    <content type="html"><![CDATA[<!-- # linux ntp 配置 --><h2 id="ntp-server"><a href="#ntp-server" class="headerlink" title="ntp server"></a>ntp server</h2><ol><li><p>检查安装，以下命令选一（默认应该会有，基本不用执行步骤1,2）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查安装</span></span><br><span class="line">whereis ntp</span><br><span class="line"><span class="comment"># 检查安装</span></span><br><span class="line">rpm -qa | grep ntp</span><br><span class="line"><span class="comment"># 检查安装</span></span><br><span class="line">yum list installed | grep ntp</span><br></pre></td></tr></table></figure></li><li><p>如果没有ntp，以下命令选一（默认应该会有，基本不用执行步骤1,2）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum 安装</span></span><br><span class="line">yum -y install ntp</span><br><span class="line"><span class="comment"># rpm 安装</span></span><br><span class="line">rpm -ivh ntp*</span><br></pre></td></tr></table></figure></li><li><p>root权限，备份/etc/ntp.conf</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mv /etc/ntp.conf /etc/ntp.conf.back</span><br><span class="line"><span class="comment"># cp /etc/ntp.conf /etc/ntp.conf.back</span></span><br></pre></td></tr></table></figure></li><li><p>root权限，新建ntp.conf</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/ntp.conf</span><br></pre></td></tr></table></figure></li><li><p>复制以下内容到<code>/etc/ntp.conf</code>,然后保存</p></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">driftfile /var/lib/ntp/drift</span><br><span class="line"></span><br><span class="line"># 放行所有进入本 NTP 的服务器，或可以列出单独ip</span><br><span class="line"></span><br><span class="line">restrict default ignore</span><br><span class="line"></span><br><span class="line"># 默认值，放行本机来源</span><br><span class="line"></span><br><span class="line">restrict 127.0.0.1</span><br><span class="line"></span><br><span class="line"># 放行局域网用户来源，或可以列出单独IP</span><br><span class="line"></span><br><span class="line">restrict 10.160.13.0 mask 255.255.255.0 nomodify notrap</span><br><span class="line"></span><br><span class="line"># 默认的一个内部时钟数据，用在没有外部 NTP 服务器时，使用它为局域网用户提供服务：</span><br><span class="line"></span><br><span class="line">server 127.127.1.0 # local clock fudge 127.127.1.0 stratum 10</span><br><span class="line"></span><br><span class="line">includefile /etc/ntp/crypto/pw</span><br><span class="line"></span><br><span class="line">keys /etc/ntp/keys</span><br></pre></td></tr></table></figure><ol><li>启动ntpd服务，二选一</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方法一</span></span><br><span class="line">service ntpd start</span><br><span class="line"><span class="comment"># 方法二</span></span><br><span class="line">/etc/init.d/ntpd start</span><br></pre></td></tr></table></figure><ol><li>打开端口（如防火墙没开，不需要开端口）</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看123端口</span></span><br><span class="line">lsof -i:123</span><br><span class="line"><span class="comment"># 查看123端口</span></span><br><span class="line">netstat -anpo| grep 123</span><br><span class="line"><span class="comment"># 对外开放123端口</span></span><br><span class="line">iptables -I INPUT -p udp -m udp --sport 123 -j ACCEPT</span><br></pre></td></tr></table></figure><ol><li>加入自启动</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig ntpd on</span><br></pre></td></tr></table></figure><ol><li>查看状态</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ntp服务状态</span></span><br><span class="line">ntpstat</span><br><span class="line"><span class="comment"># 查看ntp服务器与上层ntp的状态，ctrl c 退出</span></span><br><span class="line">watch ntpq -p</span><br><span class="line"><span class="comment"># ntp服务端口</span></span><br><span class="line">netstat -unlnp</span><br></pre></td></tr></table></figure><h2 id="ntp-client"><a href="#ntp-client" class="headerlink" title="ntp client"></a>ntp client</h2><ol><li>尝试连接ntp服务器</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ntpdate –d serverIP</span><br></pre></td></tr></table></figure><h2 id="如显示stratum-16。为失败，而正常情况下stratum这个值得范围是0-15"><a href="#如显示stratum-16。为失败，而正常情况下stratum这个值得范围是0-15" class="headerlink" title="如显示stratum 16。为失败，而正常情况下stratum这个值得范围是0~15"></a>如显示stratum 16。为失败，而正常情况下stratum这个值得范围是0~15</h2><ol><li>定时任务修改</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure><ol><li>注释掉原同步ntpdate，增加如下ntpdata 任务(ip为配置好的ntp server ip)</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* * * * *  /usr/sbin/ntpdate 10.160.13.110</span><br><span class="line"></span><br><span class="line">* * * * * sleep 30; /usr/sbin/ntpdate 10.160.13.110</span><br></pre></td></tr></table></figure><h2 id="ntpdate"><a href="#ntpdate" class="headerlink" title="ntpdate"></a>ntpdate</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#-u：从man ntpdate中可以看出-u参数可以越过防火墙与主机同步；</span></span><br><span class="line">ntpdate -u 210.72.145.44 :网络时间同步命令</span><br></pre></td></tr></table></figure><p>注意：若不加上-u参数， 会出现以下提示：no server suitable for synchronization found</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- # linux ntp 配置 --&gt;
&lt;h2 id=&quot;ntp-server&quot;&gt;&lt;a href=&quot;#ntp-server&quot; class=&quot;headerlink&quot; title=&quot;ntp server&quot;&gt;&lt;/a&gt;ntp server&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;检查安装，
      
    
    </summary>
    
      <category term="linux" scheme="http://yoursite.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="ntp" scheme="http://yoursite.com/tags/ntp/"/>
    
      <category term="time server" scheme="http://yoursite.com/tags/time-server/"/>
    
  </entry>
  
  <entry>
    <title>docker install</title>
    <link href="http://yoursite.com/2019/linux%20docker.html"/>
    <id>http://yoursite.com/2019/linux docker.html</id>
    <published>2019-03-21T16:00:00.000Z</published>
    <updated>2019-11-22T08:42:10.119Z</updated>
    
    <content type="html"><![CDATA[<!-- # docker install --><h2 id="docker-install"><a href="#docker-install" class="headerlink" title="docker install"></a>docker install</h2><ol><li><p>Docker 要求系统的内核版本高于3.10</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -r</span><br></pre></td></tr></table></figure></li><li><p>直接写命令了</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">yum -y update</span><br><span class="line">yum install -y yum-utils device-mapper-persistent-data lvm2</span><br><span class="line">yum-config-manager     --add-repo     https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line">yum install -y docker-ce</span><br><span class="line">groupadd docker</span><br><span class="line">useradd -d /home/docker -g docker -m docker</span><br><span class="line">usermod -aG docker docker</span><br><span class="line">systemctl <span class="built_in">enable</span> docker</span><br><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure></li></ol><h1 id="docker-gitlab"><a href="#docker-gitlab" class="headerlink" title="docker gitlab"></a>docker gitlab</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull gitlab/gitlab-ce</span><br><span class="line">docker run -d --publish 8443:443 --publish 10080:80 --publish 2222:22     --name gitlab     --restart always     --volume /opt/gitlab/config:/etc/gitlab     --volume /opt/gitlab/logs:/var/<span class="built_in">log</span>/gitlab     --volume /opt/gitlab/data:/var/opt/gitlab     gitlab/gitlab-ce</span><br></pre></td></tr></table></figure><h1 id="docker-onlyoffice-documentserver"><a href="#docker-onlyoffice-documentserver" class="headerlink" title="docker onlyoffice/documentserver"></a>docker onlyoffice/documentserver</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -i -t -d -p 9970:80 onlyoffice/documentserver</span><br><span class="line">docker run --net onlyoffice --privileged -i -t -d --restart=always  --name onlyoffice-document-server  -p 127.0.0.1:9999:9999 -p 0.0.0.0:443:443  -v /app/onlyoffice/DocumentServer/data:/var/www/onlyoffice/Data  -v /app/onlyoffice/DocumentServer/logs:/var/<span class="built_in">log</span>/onlyoffice  -v /app/onlyoffice/DocumentServer/lib:/var/lib/onlyoffice  onlyoffice/documentserver</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- # docker install --&gt;
&lt;h2 id=&quot;docker-install&quot;&gt;&lt;a href=&quot;#docker-install&quot; class=&quot;headerlink&quot; title=&quot;docker install&quot;&gt;&lt;/a&gt;docker install&lt;/h2
      
    
    </summary>
    
      <category term="linux" scheme="http://yoursite.com/categories/linux/"/>
    
    
      <category term="install" scheme="http://yoursite.com/tags/install/"/>
    
      <category term="docker" scheme="http://yoursite.com/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>Linux install jenkins</title>
    <link href="http://yoursite.com/2019/install%20jenkins.html"/>
    <id>http://yoursite.com/2019/install jenkins.html</id>
    <published>2019-01-01T00:00:00.000Z</published>
    <updated>2019-11-22T08:42:10.112Z</updated>
    
    <content type="html"><![CDATA[<!-- # install jenkins --><h2 id="docker-install-jenkins"><a href="#docker-install-jenkins" class="headerlink" title="docker install jenkins"></a>docker install jenkins</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">docker pull jenkins/jenkins:lts</span><br><span class="line"></span><br><span class="line">mkdir -p /var/jenkins_home</span><br><span class="line">chmod -R 777 /var/jenkins_home</span><br><span class="line">chown -R 1000:1000 /var/jenkins_home</span><br><span class="line"></span><br><span class="line">mkdir -p /home/docker/jenkins/data</span><br><span class="line">chmod -R 777 /home/docker/jenkins/data</span><br><span class="line">chown -R 1000:1000 /home/docker/jenkins/data</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> -d 后台 --name 名字 -p 外端口可修改和容器端口 -p -v 服务器目录和挂载目录 镜像名</span></span><br><span class="line">docker run -d --name jenkins -p 8082:8080 -p 50000:50000 -v /home/docker/jenkins/data:/var/jenkins_home  jenkins/jenkins:lts</span><br><span class="line"></span><br><span class="line">docker logs jenkins</span><br><span class="line">docker exec -t jenkins /bin/bash</span><br><span class="line"><span class="meta">#</span><span class="bash"> 权限问题查不了</span></span><br><span class="line">cat /home/docker/jenkins/data/secrets/initialAdminPassword</span><br><span class="line"></span><br><span class="line">docker images</span><br><span class="line"></span><br><span class="line">docker ps</span><br><span class="line"></span><br><span class="line">docker stop `CONTAINER ID`</span><br><span class="line"></span><br><span class="line">docker rm jenkins</span><br><span class="line"></span><br><span class="line">docker run -d --name jenkins -p 8082:8080 -p 50000:50000 -v /home/docker/jenkins/data:/var/jenkins_home  jenkins/jenkins:lts</span><br><span class="line"></span><br><span class="line">systemctl sop docker</span><br><span class="line">rm -rf /var/bin/docker</span><br></pre></td></tr></table></figure><h2 id="user-jar-install-jenkins"><a href="#user-jar-install-jenkins" class="headerlink" title="user jar install jenkins"></a>user jar install jenkins</h2><ol><li>安装jdk8</li><li><p>创建用户</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">useradd -g user -d /home/jenkins -m jenkins</span><br><span class="line">passwd jenkins</span><br><span class="line">su - jenkins</span><br><span class="line">wget https://mirrors.tuna.tsinghua.edu.cn/jenkins/war-stable/2.150.1/jenkins.war</span><br></pre></td></tr></table></figure></li><li><p>启动脚本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">/bin/bash</span><br><span class="line"></span><br><span class="line">: &lt;&lt; !</span><br><span class="line"><span class="keyword">for</span> start jenkin by java -jar</span><br><span class="line">!</span><br><span class="line"></span><br><span class="line"><span class="comment"># set jenkins_home path</span></span><br><span class="line"><span class="keyword">if</span> [[ ! -n `grep <span class="string">"JENKINS_HOME"</span> ~/.bash_profile` ]];<span class="keyword">then</span></span><br><span class="line">sed -i <span class="string">'$aexport JENKINS_HOME='</span><span class="variable">$&#123;HOME&#125;</span><span class="string">'/jenkins_home'</span> ~/.bash_profile</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'add jenkins home'</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'jenkons home already in bash_profile'</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># mkdir jenkins_home</span></span><br><span class="line"><span class="keyword">if</span> [[ ! -d <span class="variable">$&#123;HOME&#125;</span>/jenkins_home ]] ; <span class="keyword">then</span></span><br><span class="line">mkdir -p <span class="variable">$&#123;HOME&#125;</span>/jenkins_home</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'mkdir jenkins home'</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">'jenkins home is already in '</span><span class="variable">$&#123;HOME&#125;</span><span class="string">''</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># jenkins run or not and kill</span></span><br><span class="line">jenkins_pid=`ps -ef | grep <span class="string">'java -jar jenkins.war'</span>| grep -v grep| awk <span class="string">'&#123;print $2&#125;'</span>`</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$&#123;jenkins_pid&#125;</span> &gt; 1 ];<span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'jenkins is running'</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"kill jenkins ？ please input (y\n)"</span></span><br><span class="line"><span class="built_in">read</span> char</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$&#123;char&#125;</span> = <span class="string">'y'</span> ];<span class="keyword">then</span></span><br><span class="line">  <span class="built_in">kill</span> -9 <span class="variable">$&#123;jenkins_pid&#125;</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">'kill jenkins success'</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">'not kill jenkins and exit'</span></span><br><span class="line">  <span class="built_in">exit</span> 0</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'no jenkins is running'</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># start jenkins</span></span><br><span class="line">nohup java -jar jenkins.war --ajp13Port=-1 --httpPort=8081 &gt;/dev/null 2&gt;&amp;1 &amp;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"start jenkins with command: 'nohup java -jar jenkins.war --ajp13Port=-1 --httpPort=8081 &gt;/dev/null 2&gt;&amp;1 &amp;'"</span></span><br><span class="line"><span class="built_in">echo</span> `ps -ef | grep <span class="string">'java -jar jenkins.war'</span>| grep -v grep| awk <span class="string">'&#123;print $2&#125;'</span>`</span><br></pre></td></tr></table></figure></li><li><p>初始密码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">more .jenkins/secret/initialAdminPassword</span><br><span class="line">more ~/jenkins_home/secret/initialAdminPassword</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- # install jenkins --&gt;
&lt;h2 id=&quot;docker-install-jenkins&quot;&gt;&lt;a href=&quot;#docker-install-jenkins&quot; class=&quot;headerlink&quot; title=&quot;docker install jenkin
      
    
    </summary>
    
      <category term="linux" scheme="http://yoursite.com/categories/linux/"/>
    
    
      <category term="jenkins" scheme="http://yoursite.com/tags/jenkins/"/>
    
      <category term="install" scheme="http://yoursite.com/tags/install/"/>
    
  </entry>
  
  <entry>
    <title>linux ifcfg eth 配置</title>
    <link href="http://yoursite.com/2019/linux%20%20ifcfg%20eth%20%E9%85%8D%E7%BD%AE.html"/>
    <id>http://yoursite.com/2019/linux  ifcfg eth 配置.html</id>
    <published>2019-01-01T00:00:00.000Z</published>
    <updated>2021-03-31T09:09:41.708Z</updated>
    
    <content type="html"><![CDATA[<!-- # linux ifcfg eth 配置 --><ol><li><p><code>cd /etc/sysconfig/network-scripts</code></p></li><li><p><code>vi ifcfg-eth0</code></p></li><li><p>ifcfg内容<br><br>静态：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># 网卡类型</span><br><span class="line">TYPE=Ethernet</span><br><span class="line"># 网卡接口名称</span><br><span class="line">DEVICE=eth0</span><br><span class="line"># 系统启动时是否自动加载</span><br><span class="line">ONBOOT=yes</span><br><span class="line"># 地址协议:static静态协议,bootp协议,dhcp协议</span><br><span class="line">BOOTPROTO=static</span><br><span class="line"># 网卡IP地址</span><br><span class="line">IPADDR=10.10.10.1</span><br><span class="line"># 网卡网络地址，子网掩码</span><br><span class="line">NETMASK=255.0.0.0</span><br><span class="line"># 网卡网关地址</span><br><span class="line">GATEWAY=10.10.10.1</span><br><span class="line"># 网卡DNS地址</span><br><span class="line">DNS1=10.10.10.1</span><br><span class="line"># 网卡广播地址</span><br><span class="line">BROADCAST=10.10.10.255</span><br><span class="line"># 网卡设备MAC地址</span><br><span class="line">HWADDR=</span><br></pre></td></tr></table></figure><p>动态：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># 网卡类型</span><br><span class="line">TYPE=Ethernet</span><br><span class="line"># 网卡接口名称</span><br><span class="line">DEVICE=eth1</span><br><span class="line"># 系统启动时是否自动加载</span><br><span class="line">ONBOOT=yes</span><br><span class="line"># 地址协议:static静态协议,bootp协议,dhcp协议</span><br><span class="line">BOOTPROTO=dhcp</span><br><span class="line"># 网卡IP地址</span><br><span class="line">IPADDR=</span><br><span class="line"># 网卡网络地址，子网掩码</span><br><span class="line">NETMASK=</span><br><span class="line"># 网卡网关地址</span><br><span class="line">GATEWAY=</span><br><span class="line"># 网卡DNS地址</span><br><span class="line">DNS1=</span><br><span class="line"># 网卡广播地址</span><br><span class="line">BROADCAST=</span><br><span class="line"># 网卡设备MAC地址</span><br><span class="line">HWADDR=</span><br></pre></td></tr></table></figure></li><li><p><code>systemctl restart network</code></p></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- # linux ifcfg eth 配置 --&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;cd /etc/sysconfig/network-scripts&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;vi ifcfg-eth0&lt;/code&gt;&lt;/p&gt;
&lt;/l
      
    
    </summary>
    
      <category term="linux" scheme="http://yoursite.com/categories/linux/"/>
    
    
      <category term="ifcfg" scheme="http://yoursite.com/tags/ifcfg/"/>
    
      <category term="network" scheme="http://yoursite.com/tags/network/"/>
    
  </entry>
  
  <entry>
    <title>linux curl 命令</title>
    <link href="http://yoursite.com/2019/linux%20curl.html"/>
    <id>http://yoursite.com/2019/linux curl.html</id>
    <published>2019-01-01T00:00:00.000Z</published>
    <updated>2019-11-22T08:42:10.116Z</updated>
    
    <content type="html"><![CDATA[<!-- # linux curl 命令 --><h2 id="curl-get"><a href="#curl-get" class="headerlink" title="curl get"></a>curl get</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl <span class="variable">$URL</span></span><br></pre></td></tr></table></figure><h2 id="curl-post-form"><a href="#curl-post-form" class="headerlink" title="curl post form"></a>curl post form</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -s 静默输出 -i 包括头信息输出 -H 请求头信息 -X 请求方式 -d 数据 接地址</span></span><br><span class="line">curl -s -i -H <span class="string">"Content-Type: application/x-www-form-urlencoded"</span> -X POST -d <span class="string">'&#123;"amount":"1"&#125;'</span> http://localhost:82/interface/</span><br></pre></td></tr></table></figure><h2 id="curl-post-json"><a href="#curl-post-json" class="headerlink" title="curl post json"></a>curl post json</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -H 请求头信息 -X 请求方式 -d 数据 接地址</span></span><br><span class="line">curl -H <span class="string">"Content-Type:application/json"</span> -X POST --data <span class="string">'&#123;"data":&#123;"amount":88.00&#125;,"retInfo":"处理成功","retCode":"0000"&#125;'</span> http://localhost:82/interface/</span><br></pre></td></tr></table></figure><h2 id="curl-参数"><a href="#curl-参数" class="headerlink" title="curl 参数"></a>curl 参数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">-a/--append    上传文件时，附加到目标文件</span><br><span class="line">-A/--user-agent &lt;string&gt;    设置用户代理发送给服务器</span><br><span class="line">-anyauth    可以使用“任何”身份验证方法</span><br><span class="line">-b/--cookie &lt;name=string/file&gt;    cookie字符串或文件读取位置</span><br><span class="line">     --basic    使用HTTP基本验证</span><br><span class="line">-B/--use-ascii    使用ASCII /文本传输</span><br><span class="line">-c/--cookie-jar &lt;file&gt;    操作结束后把cookie写入到这个文件中</span><br><span class="line">-C/--continue-at &lt;offset&gt;    断点续转</span><br><span class="line">-d/--data &lt;data&gt;    HTTP POST方式传送数据</span><br><span class="line">     --data-ascii &lt;data&gt;    以ascii的方式post数据</span><br><span class="line">     --data-binary &lt;data&gt;    以二进制的方式post数据</span><br><span class="line">     --negotiate    使用HTTP身份验证</span><br><span class="line">     --digest    使用数字身份验证</span><br><span class="line">     --disable-eprt    禁止使用EPRT或LPRT</span><br><span class="line">     --disable-epsv    禁止使用EPSV</span><br><span class="line">-D/--dump-header &lt;file&gt;    把header信息写入到该文件中</span><br><span class="line">     --egd-file &lt;file&gt;    为随机数据(SSL)设置EGD socket路径</span><br><span class="line">     --tcp-nodelay    使用TCP_NODELAY选项</span><br><span class="line">-e/--referer    来源网址</span><br><span class="line">-E/--cert &lt;cert[:passwd]&gt;    客户端证书文件和密码 (SSL)</span><br><span class="line">     --cert-type &lt;type&gt;    证书文件类型 (DER/PEM/ENG) (SSL)</span><br><span class="line">     --key &lt;key&gt;    私钥文件名 (SSL)</span><br><span class="line">     --key-type &lt;type&gt;    私钥文件类型 (DER/PEM/ENG) (SSL)</span><br><span class="line">     --pass &lt;pass&gt;    私钥密码 (SSL)</span><br><span class="line">     --engine &lt;eng&gt;    加密引擎使用 (SSL). &quot;--engine list&quot; for list</span><br><span class="line">     --cacert &lt;file&gt;    CA证书 (SSL)</span><br><span class="line">     --capath &lt;directory&gt;    CA目录 (made using c_rehash) to verify peer against (SSL)</span><br><span class="line">     --ciphers &lt;list&gt;    SSL密码</span><br><span class="line">     --compressed    要求返回是压缩的形势 (using deflate or gzip)</span><br><span class="line">     --connect-timeout &lt;seconds&gt;    设置最大请求时间</span><br><span class="line">     --create-dirs    建立本地目录的目录层次结构</span><br><span class="line">     --crlf    上传是把LF转变成CRLF</span><br><span class="line">-f/--fail    连接失败时不显示http错误</span><br><span class="line">     --ftp-create-dirs    如果远程目录不存在，创建远程目录</span><br><span class="line">     --ftp-method [multicwd/nocwd/singlecwd]    控制CWD的使用</span><br><span class="line">     --ftp-pasv    使用 PASV/EPSV 代替端口</span><br><span class="line">     --ftp-skip-pasv-ip    使用PASV的时候,忽略该IP地址</span><br><span class="line">     --ftp-ssl    尝试用 SSL/TLS 来进行ftp数据传输</span><br><span class="line">     --ftp-ssl-reqd    要求用 SSL/TLS 来进行ftp数据传输</span><br><span class="line">-F/--form &lt;name=content&gt;    模拟http表单提交数据</span><br><span class="line">     --form-string &lt;name=string&gt;    模拟http表单提交数据</span><br><span class="line">-g/--globoff    禁用网址序列和范围使用&#123;&#125;和[]</span><br><span class="line">-G/--get    以get的方式来发送数据</span><br><span class="line">-H/--header &lt;line&gt;    自定义头信息传递给服务器</span><br><span class="line">     --ignore-content-length    忽略的HTTP头信息的长度</span><br><span class="line">-i/--include    输出时包括protocol头信息</span><br><span class="line">-I/--head    只显示请求头信息</span><br><span class="line">-j/--junk-session-cookies    读取文件进忽略session cookie</span><br><span class="line">     --interface &lt;interface&gt;    使用指定网络接口/地址</span><br><span class="line">     --krb4 &lt;level&gt;    使用指定安全级别的krb4</span><br><span class="line">-k/--insecure    允许不使用证书到SSL站点</span><br><span class="line">-K/--config    指定的配置文件读取</span><br><span class="line">-l/--list-only    列出ftp目录下的文件名称</span><br><span class="line">     --limit-rate &lt;rate&gt;    设置传输速度</span><br><span class="line">     --local-port&lt;NUM&gt;    强制使用本地端口号</span><br><span class="line">-m/--max-time &lt;seconds&gt;    设置最大传输时间</span><br><span class="line">     --max-redirs &lt;num&gt;    设置最大读取的目录数</span><br><span class="line">     --max-filesize &lt;bytes&gt;    设置最大下载的文件总量</span><br><span class="line">-M/--manual    显示全手动</span><br><span class="line">-n/--netrc    从netrc文件中读取用户名和密码</span><br><span class="line">     --netrc-optional    使用 .netrc 或者 URL来覆盖-n</span><br><span class="line">     --ntlm    使用 HTTP NTLM 身份验证</span><br><span class="line">-N/--no-buffer    禁用缓冲输出</span><br><span class="line">-o/--output    把输出写到该文件中</span><br><span class="line">-O/--remote-name    把输出写到该文件中，保留远程文件的文件名</span><br><span class="line">-p/--proxytunnel    使用HTTP代理</span><br><span class="line">     --proxy-anyauth    选择任一代理身份验证方法</span><br><span class="line">     --proxy-basic    在代理上使用基本身份验证</span><br><span class="line">     --proxy-digest    在代理上使用数字身份验证</span><br><span class="line">     --proxy-ntlm    在代理上使用ntlm身份验证</span><br><span class="line">-P/--ftp-port &lt;address&gt;    使用端口地址，而不是使用PASV</span><br><span class="line">-q    作为第一个参数，关闭 .curlrc</span><br><span class="line">-Q/--quote &lt;cmd&gt;    文件传输前，发送命令到服务器</span><br><span class="line">-r/--range &lt;range&gt;    检索来自HTTP/1.1或FTP服务器字节范围</span><br><span class="line">--range-file    读取（SSL）的随机文件</span><br><span class="line">-R/--remote-time    在本地生成文件时，保留远程文件时间</span><br><span class="line">     --retry &lt;num&gt;    传输出现问题时，重试的次数</span><br><span class="line">     --retry-delay &lt;seconds&gt;    传输出现问题时，设置重试间隔时间</span><br><span class="line">     --retry-max-time &lt;seconds&gt;    传输出现问题时，设置最大重试时间</span><br><span class="line">-s/--silent    静默模式。不输出任何东西</span><br><span class="line">-S/--show-error    显示错误</span><br><span class="line">     --socks4 &lt;host[:port]&gt;    用socks4代理给定主机和端口</span><br><span class="line">     --socks5 &lt;host[:port]&gt;    用socks5代理给定主机和端口</span><br><span class="line">     --stderr &lt;file&gt;</span><br><span class="line">-t/--telnet-option &lt;OPT=val&gt;    Telnet选项设置</span><br><span class="line">     --trace &lt;file&gt;    对指定文件进行debug</span><br><span class="line">     --trace-ascii &lt;file&gt;    Like --跟踪但没有hex输出</span><br><span class="line">     --trace-time    跟踪/详细输出时，添加时间戳</span><br><span class="line">-T/--upload-file &lt;file&gt;    上传文件</span><br><span class="line">     --url &lt;URL&gt;    Spet URL to work with</span><br><span class="line">-u/--user &lt;user[:password]&gt;    设置服务器的用户和密码</span><br><span class="line">-U/--proxy-user &lt;user[:password]&gt;    设置代理用户名和密码</span><br><span class="line">-w/--write-out [format]    什么输出完成后</span><br><span class="line">-x/--proxy &lt;host[:port]&gt;    在给定的端口上使用HTTP代理</span><br><span class="line">-X/--request &lt;command&gt;    指定什么命令</span><br><span class="line">-y/--speed-time    放弃限速所要的时间，默认为30</span><br><span class="line">-Y/--speed-limit    停止传输速度的限制，速度时间</span><br><span class="line">使用--progress显示进度条</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- # linux curl 命令 --&gt;
&lt;h2 id=&quot;curl-get&quot;&gt;&lt;a href=&quot;#curl-get&quot; class=&quot;headerlink&quot; title=&quot;curl get&quot;&gt;&lt;/a&gt;curl get&lt;/h2&gt;&lt;figure class=&quot;highlight
      
    
    </summary>
    
      <category term="linux" scheme="http://yoursite.com/categories/linux/"/>
    
    
      <category term="curl" scheme="http://yoursite.com/tags/curl/"/>
    
      <category term="http" scheme="http://yoursite.com/tags/http/"/>
    
  </entry>
  
  <entry>
    <title>防火墙设置</title>
    <link href="http://yoursite.com/2018/linux%20%E9%98%B2%E7%81%AB%E5%A2%99.html"/>
    <id>http://yoursite.com/2018/linux 防火墙.html</id>
    <published>2018-12-12T00:00:00.000Z</published>
    <updated>2019-11-22T08:42:10.135Z</updated>
    
    <content type="html"><![CDATA[<!-- # Linux firewall --><h2 id="SUSE"><a href="#SUSE" class="headerlink" title="SUSE"></a>SUSE</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SuSEfirewall2 stop   <span class="comment">#停止firewall</span></span><br><span class="line"></span><br><span class="line">chkconfig SuSEfirewall2_setup off   <span class="comment">#禁止firewall开机启动1</span></span><br><span class="line">chkconfig SuSEfirewall2_init off  <span class="comment">#禁止firewall开机启动2</span></span><br><span class="line"></span><br><span class="line">chkconfig --list|grep fire    <span class="comment">#查看防火墙状态</span></span><br></pre></td></tr></table></figure><h2 id="CentOS-7"><a href="#CentOS-7" class="headerlink" title="CentOS 7"></a>CentOS 7</h2><hr><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">systemctl status firewalld  <span class="comment">#firewall状态</span></span><br><span class="line">systemctl start firewalld.service        <span class="comment">#启动firewall</span></span><br><span class="line">systemctl stop firewalld.service        <span class="comment">#停止firewall</span></span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld.service  <span class="comment">#禁止firewall开机启动</span></span><br></pre></td></tr></table></figure><h2 id="Centos-6"><a href="#Centos-6" class="headerlink" title="Centos 6"></a>Centos 6</h2><hr><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">service iptables stop     <span class="comment">#关闭防火墙</span></span><br><span class="line">service iptables start    <span class="comment">#启动防火墙</span></span><br><span class="line">service iptables restart  <span class="comment">#重启防火墙</span></span><br><span class="line">service iptables status   <span class="comment">#查看防火墙状态</span></span><br><span class="line">chkconfig iptables off    <span class="comment">#永久关闭防火墙</span></span><br><span class="line">chkconfig iptables on    <span class="comment">#永久关闭后启用</span></span><br></pre></td></tr></table></figure><h2 id="重启网络服务"><a href="#重启网络服务" class="headerlink" title="重启网络服务"></a>重启网络服务</h2><hr><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service network restart</span><br></pre></td></tr></table></figure><h2 id="防火墙开放端口"><a href="#防火墙开放端口" class="headerlink" title="防火墙开放端口"></a>防火墙开放端口</h2><hr><ol><li>SuSE默认的防火墙设置为禁止所有外来联结。 如果你想开放某个端口的话，就得修改防火墙设置开放这个端口。</li><li><p>修改SuSE的防火墙设置以开放某指定端口，手动修改：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysconfig/SuSEfirewall2</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FW_SERVICES_EXT_TCP = <span class="string">"6000"</span>     <span class="comment">#TCP端口的情况</span></span><br><span class="line">FW_SERVICES_EXT_UDP = <span class="string">"177"</span>    <span class="comment">#UDP端口的情况</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rcSuSEfirewall2 restart    <span class="comment">#防火墙设置重启生效</span></span><br></pre></td></tr></table></figure></li><li><p>添加防火墙规则：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptable -A INPUT -p udp -s 0/0 -d 0/0 --dport 177 -j ACCEPT</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- # Linux firewall --&gt;
&lt;h2 id=&quot;SUSE&quot;&gt;&lt;a href=&quot;#SUSE&quot; class=&quot;headerlink&quot; title=&quot;SUSE&quot;&gt;&lt;/a&gt;SUSE&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;
      
    
    </summary>
    
      <category term="linux" scheme="http://yoursite.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="firewall" scheme="http://yoursite.com/tags/firewall/"/>
    
  </entry>
  
  <entry>
    <title>selenium python</title>
    <link href="http://yoursite.com/2018/python3%20selenium%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8.html"/>
    <id>http://yoursite.com/2018/python3 selenium简单使用.html</id>
    <published>2018-12-12T00:00:00.000Z</published>
    <updated>2019-11-22T08:42:10.140Z</updated>
    
    <content type="html"><![CDATA[<!-- # selenium python --><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># 配置目录</span></span><br><span class="line">    <span class="keyword">from</span> conf.selenium_config <span class="keyword">import</span> RESPATH</span><br><span class="line">    os.path.exists(RESPATH)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="comment"># 本机目录，末尾不加 “/”</span></span><br><span class="line">    RESPATH = <span class="string">'D:/IDE/Test/res'</span></span><br><span class="line">    <span class="keyword">if</span> os.path.exists(RESPATH) <span class="keyword">is</span> <span class="literal">False</span>:</span><br><span class="line">        print(RESPATH, <span class="string">' is not find'</span>)</span><br><span class="line">        quit()</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.desired_capabilities <span class="keyword">import</span> DesiredCapabilities</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.firefox.firefox_binary <span class="keyword">import</span> FirefoxBinary</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">chromeDriver</span><span class="params">()</span>:</span></span><br><span class="line">    driverPath = RESPATH + <span class="string">"/chromedriver2.31.exe"</span></span><br><span class="line">    <span class="comment"># chrome.exe地址</span></span><br><span class="line">    chromePath = RESPATH + <span class="string">"/Chrome60/chrome.exe"</span></span><br><span class="line">    <span class="comment"># chrome启动选项</span></span><br><span class="line">    options = webdriver.ChromeOptions()</span><br><span class="line">    <span class="comment"># options.add_argument("--user-data-dir=" + chromeoptionPath))</span></span><br><span class="line">    options.add_argument(<span class="string">"--start-maximized"</span>)</span><br><span class="line">    options.add_argument(<span class="string">"--test-type"</span>)</span><br><span class="line">    options.add_argument(<span class="string">"allow-running-insecure-content"</span>)</span><br><span class="line">    <span class="keyword">if</span> os.path.isfile(chromePath):</span><br><span class="line">        options.binary_location = chromePath</span><br><span class="line">    <span class="comment"># 带参数启动driver</span></span><br><span class="line">    dr = webdriver.Chrome(</span><br><span class="line">        chrome_options=options, executable_path=driverPath, port=<span class="number">9515</span>)</span><br><span class="line">    dr.implicitly_wait(<span class="number">10</span>)  <span class="comment"># 隐性等待，最长等10秒</span></span><br><span class="line">    print(<span class="string">'driver started'</span>)</span><br><span class="line">    <span class="keyword">return</span> dr</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">firefoxDriver</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># 获取当前文件夹的绝对路径#driver地址</span></span><br><span class="line">    ffpath = RESPATH + <span class="string">"/Mozilla Firefox46/firefox.exe"</span></span><br><span class="line">    binary = FirefoxBinary(ffpath)</span><br><span class="line">    <span class="comment"># 带参数启动driver</span></span><br><span class="line">    <span class="comment"># profile = webdriver.FirefoxProfile(xx)</span></span><br><span class="line">    <span class="keyword">if</span> os.path.isfile(ffpath):</span><br><span class="line">        dr = webdriver.Firefox(firefox_binary=binary)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        dr = webdriver.Firefox()</span><br><span class="line">    <span class="comment"># 将浏览器最大化</span></span><br><span class="line">    dr.maximize_window()</span><br><span class="line">    <span class="comment"># 隐性等待，最长等10秒</span></span><br><span class="line">    dr.implicitly_wait(<span class="number">10</span>)</span><br><span class="line">    print(<span class="string">'driver started'</span>)</span><br><span class="line">    <span class="keyword">return</span> dr</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ieDriver</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># 修改配置信息</span></span><br><span class="line">    DesiredCapabilities.INTERNETEXPLORER[<span class="string">'ignoreProtectedModeSettings'</span>] = <span class="literal">True</span></span><br><span class="line">    <span class="comment"># 获取当前文件夹的绝对路径+driver地址</span></span><br><span class="line">    driverPath = RESPATH + <span class="string">"/IEDriverServer_x64_2.53.1.exe"</span></span><br><span class="line">    dr = webdriver.Ie(executable_path=driverPath)</span><br><span class="line">    <span class="comment"># 将浏览器最大化</span></span><br><span class="line">    dr.maximize_window()</span><br><span class="line">    <span class="comment"># 隐性等待，最长等10秒</span></span><br><span class="line">    dr.implicitly_wait(<span class="number">10</span>)</span><br><span class="line">    print(<span class="string">'driver started'</span>)</span><br><span class="line">    <span class="keyword">return</span> dr</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="comment"># chromeDriver()</span></span><br><span class="line">    <span class="comment"># firefoxDriver()</span></span><br><span class="line">    ieDriver()</span><br></pre></td></tr></table></figure><h2 id="元素定位"><a href="#元素定位" class="headerlink" title="元素定位"></a>元素定位</h2><p>定位元素先要掌握基本的HTML语法：</p><ol><li><p>定位单个元素</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">find_element_by_id(&apos;selenium&apos;)                      #通过id方式定位 </span><br><span class="line">find_element_by_name(&apos;selenium&apos;)                    #通过name方式定位 </span><br><span class="line">find_element_by_class_name(&apos;selenium&apos;)              #通过class name 方式定位</span><br><span class="line">find_element_by_tag_name(&apos;selenium&apos;)                #通过tag name方式定位 </span><br><span class="line">find_element_by_link_text(&apos;selenium&apos;)               #通过text方式定位</span><br><span class="line">find_element_by_partial_link_text(&apos;selenium&apos;)       #通过部分text方式定位</span><br><span class="line">find_element_by_xpath(&apos;//input[@id=&quot;selenium&quot;]&apos;)    #通过xpath方式定位</span><br><span class="line">find_element_by_css_selector(&apos;selenium&apos;)            #通过CSS方式定位</span><br></pre></td></tr></table></figure></li><li><p>定位一组元素,批量对象（复选框）复选框</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">find_element_by_id(&apos;selenium&apos;)                  </span><br><span class="line">find_element_by_name(&apos;selenium&apos;)                </span><br><span class="line">find_element_by_class_name(&apos;selenium&apos;)          </span><br><span class="line">find_element_by_tag_name(&apos;selenium&apos;)            </span><br><span class="line">find_element_by_link_text(&apos;selenium&apos;)           </span><br><span class="line">find_element_by_partial_link_text(&apos;selenium&apos;)   </span><br><span class="line">find_element_by_xpath(&apos;//input[@id=&quot;selenium&quot;]&apos;)</span><br><span class="line">find_element_by_css_selector(&quot;[ value=&apos;百度一下&apos;]&quot;)</span><br></pre></td></tr></table></figure></li><li><p>相同属性的元素一组对象，取对应的第几个</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">find_element_by_id(&apos;selenium&apos;)[1]                  </span><br><span class="line">find_element_by_name(&apos;selenium&apos;)[1]                </span><br><span class="line">find_element_by_class_name(&apos;selenium&apos;)[1]          </span><br><span class="line">find_element_by_tag_name(&apos;selenium&apos;)[1]            </span><br><span class="line">find_element_by_link_text(&apos;selenium&apos;)[1]           </span><br><span class="line">find_element_by_partial_link_text(&apos;selenium&apos;)[1]   </span><br><span class="line">find_element_by_xpath(&apos;//input[@id=&quot;selenium&quot;]&apos;)[1]</span><br><span class="line">find_element_by_css_selector(&apos;selenium&apos;)[1]</span><br></pre></td></tr></table></figure><p><em>注意：()和(-1)都表示最后一个元素</em> <em>xpath语法通过firepath插件可以生成，可以直接使用</em></p></li><li><p>高级 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  # 层级与属性结合</span><br><span class="line"></span><br><span class="line">  find_element_by_xpath(&quot;//div[@class=&apos;selenium&apos;]/input/span&quot;) find_element_by_xpath(&quot;//div[@class=&apos;selenium&apos;]/div[2]/input&quot;) find_element_by_xpath(.//*[@id=&apos;selenium&apos;]/../div/div/div[2]/div[4]/button)</span><br><span class="line"></span><br><span class="line"># 通过逻辑运算符定位</span><br><span class="line"></span><br><span class="line">find_element_by_xpath(&quot;//input[@id=&apos;selenium&apos; and @class=&apos;selenium1&apos;]/span/input&quot;) find_element_by_css_selector(&quot;form#form&gt;span&gt;input#su&quot;)</span><br></pre></td></tr></table></figure></p></li></ol><p>1. 使用starts-with</p><p>//div[starts-with(@id,’res’)]//table//tr//td[2]//table//tr//td//a//span[contains(.,’Developer Tutorial’)]</p><p>2. 使用contains和and</p><p>//div[starts-with(@id,’res’)]//table[1]//tr//td[2]//a//span[contains(.,’_Test’) and contains(.,’KPI’)]</p><p>3. 使用descendant</p><p>//div[starts-with(@id,’res’)]//table[1]//tr//td[2]//a//span[contains(.,’QuickStart’)]/../../../descendant::img</p><p>4. 使用ancestor</p><p>//div[starts-with(@id,’res’)]//table[1]//tr//td[2]//a//span[contains(.,’QuickStart’)]/ancestor::div[starts-with(@id,’res’)]//table[2]//descendant::a[2]</p><p>5. 使用text()</p><p>//span[@id=’idHeaderTitleCell’ and contains(text(),’QuickStart’)]</p><h2 id="控制"><a href="#控制" class="headerlink" title="控制"></a>控制</h2><h3 id="浏览器控制"><a href="#浏览器控制" class="headerlink" title="浏览器控制"></a>浏览器控制</h3><p>1. 控制浏览器大小：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">driver.set_window_size(400,500)&lt;br&gt;</span><br><span class="line">driver.maximize_window() #无参数</span><br></pre></td></tr></table></figure></p><p>浏览器后退、前进：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">driver.back()-后退、 driver.farward()-前进</span><br></pre></td></tr></table></figure></p><h3 id="多表单切换（有frame嵌套表单）"><a href="#多表单切换（有frame嵌套表单）" class="headerlink" title="多表单切换（有frame嵌套表单）"></a>多表单切换（有frame嵌套表单）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">dr.switch_to_frame(&quot;frameid&quot;)#通过frame的id进入iframe&lt;br&gt;</span><br><span class="line">dr.switch_to_frame(&quot;frameName&quot;) #通过frame的name进入iframe</span><br><span class="line"></span><br><span class="line">framepath=dr.find_element_by_class_name(&quot;frameClassname&quot;)&lt;br&gt;</span><br><span class="line">dr.switch_to_frame(framepath)#通过frame页面对象进入iframe</span><br><span class="line"></span><br><span class="line">dr.switch_to_default_content()#退出当前frame返回上一层</span><br></pre></td></tr></table></figure><p>多窗口切换<br>selenium-webdriver中使用switch_to_window()方法来切换任意窗口，常用方法有<br>driver.current_window_handle    #获取当前窗口句柄<br>driver.window_handles            #返回所有窗口句柄到当前会话<br>driver.switch_to_window()       #进入窗口，用于切换不同窗口<br>dr.title  </p><p>警告框处理<br>    webdriver中处理js生成的alert、confirm、prompt处理方法是：使用switch_to_alert()定位到alert/confirm/prompt，</p><p>alert=dr.switch_to_alert()                    #进入alert<br>alert.text #打印对话框里的文字内容<br>alert.accept()#对话框里点击alert中确定按钮<br>alert.dismiss() #对话框里点击取消按钮<br>alert.send_keys(“对话框中输入的内容”) #在对话框里输入内容  </p><p>十二、上传文件<br>    分2种：普通上传、插件上传<br>    普通上传：将本地文件的路径作为一个值放到input标签中，通过form表单提交时，将值传给服务器中去<br>    插件上传：指基于flash、javascript或ajax技术实现的上传功能或插件。<br>    1.针对普通上传用send_keys实现<br>python代码：  </p><pre><code>dr.get(&quot;D:\\workspace\\pySelenium\\resources\\upload.htm&quot;)  loadFile=dr.find_element_by_name(&quot;filebutton&quot;)# 获取上传文件input元素节点  loadFile.send_keys(&quot;D:\\workspace\\pySelenium\\resources\\frame.htm&quot;)#输入上传文件地址来实现上传  2.插件上传:使用AutoIt实现，--需要安装AutoIt程序      AutoIt安装，使用暂时略，需要时再追加，流程为：用AutoIt编写上传文件脚本生成exe文件，在python脚本中进行调用  </code></pre><p>python代码：  </p><pre><code>loadFile=dr.find_element_by_name(&quot;filebutton&quot;)# 获取上传按钮  loadFile.click()    #点击上传按钮，弹出上传对话框  os.system(&quot;D:\\autoItFile.exe&quot;)    #调用autoIt生成的exe文件，实现导入  </code></pre><p>十三、下载文件:使用AutoIt实现，–需要安装AutoIt程序，方法同上传<br>python代码：  </p><pre><code>ffp=webdriver.FirefoxProfile()  ffp.set_preference(&quot;browser.download.folderList&quot;,2)#0:代表下载到浏览器默认路径下；2：下载到指定目录  ffp.set_preference(&quot;browser.download.manager.showWhenStarting&quot;,False)#是否显示开始：True：显示；False：不显示  ffp.set_preference(&quot;browser.download.dir&quot;, os.getcwd())#指定下载文件目录，os.getcwd()无参数，返回当前目录  # ffp.set_preference(&quot;browser.helperApps.neverAsk.saveToDisk&quot;,&quot;application/octet-stream&quot;)#下载文件类型，  #指定下载页面的content-type值，application/octet-stream为文件类型，http-content-type常用对照表搜索百度  dr=webdriver.Firefox(firefox_profile=ffp)  dr.get(&quot;https://pypi.python.org/pypi/selenium#downloads&quot;)  dr.find_element_by_xpath(&quot;//div[@id=&apos;content&apos;]/div[3]/table/tbody/tr[3]/td[1]/span/a[1]&quot;).click()  #接下来使用autoIt实现  </code></pre><p>十四、cookies操作<br>    webdriver操作cookies的方法：<br>    get_cookies()：获得所有cookies的值<br>    get_cookie(name)：获得有特定name值的cookie信息<br>    add_cookie(cookie_dict)：添加cookie，必须有name和value<br>    delete_cookie(name)：删除特定名称的cookie信息，通过name找到特定的cookie并删除<br>    delete_all_cookies()：删除浏览器中所有cookie的信息<br>    注意：1.cookie是以字典形式进行存储的；<br>    2.使用场景：如登录功能会把用户名写入浏览器cookie指定key为username，那么就可以通过get_cookies()找到username，打印value，找不到说明保存浏览器的cookie是有bug的。<br>python代码：  </p><pre><code>num=1  dr.get(&quot;http://www.baidu.com&quot;)  cookies=dr.get_cookies()#获取cookie的所有信息  for ck in cookies:  print&apos;----所有cookie&apos;,num,&apos;:&apos;,ck #打印cookie的所有信息  num=num+1  print&apos;----按name查cookie：&apos;,dr.get_cookie(&quot;PSTM&quot;)#通过cookie的name获取cookie信息  dr.add_cookie({&apos;name&apos;:&apos;hello&apos;,&apos;value&apos;:&apos;123456789&apos;})#向name和value添加会话信息  cookies2=dr.get_cookies()#重新获取cookie的所有信息  for ck2 in cookies2:  if ck2[&apos;name&apos;]==&apos;hello&apos;:  print&quot;----加入的cookie信息：%s--&gt;%s&quot;,(ck2[&apos;name&apos;],ck2[&apos;value&apos;])  </code></pre><p>十五、javascript调用，python使用的方法：execute_script()<br>python代码：  </p><pre><code>dr.get(&quot;http://www.baidu.com&quot;)  dr.find_element_by_id(&quot;kw&quot;).send_keys(&quot;selenium&quot;)  dr.find_element_by_id(&quot;su&quot;).click()  js=&quot;var q=document.documentElement.scrollTop=1000&quot;    #滚动条滚到最下面  dr.execute_script(js)  time.sleep(4)  js2=&quot;var q=document.documentElement.scrollTop=0&quot;      #滚动条滚到页面顶  dr.execute_script(js2)  </code></pre><p>十六、截图，适用于脚本出错时，对当前窗口进行截图保存，使用函数：get_screenshot_as_file()<br>python代码：  </p><pre><code>dr.get(&quot;http://www.baidu.com&quot;)  try:  dr.find_element_by_id(&quot;kw1&quot;).send_keys(&quot;selenium&quot;)  dr.find_element_by_id(&quot;su&quot;).click()  exceptNoSuchElementException,msg:  dr.get_screenshot_as_file(&quot;d:\\error.jpg&quot;)    #截图输出到d盘  print msg  dr.close()  </code></pre><p>十七、关闭窗口<br>    quit()：退出相关驱动程序并关闭所有窗口。<br>    close()：关闭当前窗口，打给多个窗口时，可使用来关闭当前窗口  </p><h2 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h2><h3 id="鼠标事件"><a href="#鼠标事件" class="headerlink" title="鼠标事件"></a>鼠标事件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ActionChains类提供的常用方法：&lt;br&gt;</span><br><span class="line">1.1 perform()：执行ActionChains中存储的所有行为,对整个事件进行提交&lt;br&gt;</span><br><span class="line">1.2 context_click(): 右击&lt;br&gt;</span><br><span class="line">如：&lt;br&gt;</span><br><span class="line">from selenium.webdriver.common.action_chains import ActionChains&lt;br&gt;</span><br><span class="line">...&lt;br&gt;</span><br><span class="line">ActionChains(dr).context_click(docfile).perform()&lt;br&gt;</span><br><span class="line">1.3 double_click(): 双击&lt;br&gt;</span><br><span class="line">如：&lt;br&gt;</span><br><span class="line">from selenium.webdriver.common.action_chains import ActionChains&lt;br&gt;</span><br><span class="line">...&lt;br&gt;</span><br><span class="line">doubleClick=dr.find_element_by_id(&quot;xxx&quot;)&lt;br&gt;</span><br><span class="line">ActionChains(dr). double_Click(doubleClick).perform()&lt;br&gt;</span><br><span class="line">1.4 drag_and_drop(source,target): 拖动&lt;br&gt;</span><br><span class="line">如：&lt;br&gt;</span><br><span class="line">from selenium.webdriver.common.action_chains import ActionChains&lt;br&gt;</span><br><span class="line">...&lt;br&gt;</span><br><span class="line">dsource=dr.find_element_by_id(&quot;xxx&quot;) #拖动的源元素&lt;br&gt;</span><br><span class="line">dtarget=dr.find_element_by_id(&quot;xxx&quot;) #释放的目标目标元素&lt;br&gt;</span><br><span class="line">ActionChains(dr).drag_and_drop(dsource,dtarget).perform()&lt;br&gt;</span><br><span class="line">1.5 move_to_element(): 鼠标悬停&lt;br&gt;</span><br><span class="line">如：&lt;br&gt;</span><br><span class="line">from selenium.webdriver.common.action_chains import ActionChains&lt;br&gt;</span><br><span class="line">...&lt;br&gt;</span><br><span class="line">above=dr.find_element_by_id(&quot;xxx&quot;)&lt;br&gt;</span><br><span class="line">ActionChains(dr).move_to_element(above).perform()</span><br></pre></td></tr></table></figure><h3 id="键盘事件"><a href="#键盘事件" class="headerlink" title="键盘事件"></a>键盘事件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>from selenium.webdriver.common.keys importKeys<br>…<br>dr.get(“<a href="http://www.baidu.com&quot;" target="_blank" rel="noopener">http://www.baidu.com&quot;</a>)  </p><p>#输入内容<br>dr.find_element_by_id(“kw”).send_keys(“seleniumm”)  </p><p>#删除输入内容的最后一个字母,<br>dr.find_element_by_id(“kw”).send_keys(Keys.BACK_SPACE)  </p><p>#输入：空格+教程<br>dr.find_element_by_id(“kw”).send_keys(Keys.SPACE)<br>dr.find_element_by_id(“kw”).send_keys(u”教程”)  </p><p>#ctrl+a全选输入框内容<br>dr.find_element_by_id(“kw”).send_keys(Keys.CONTROL,’a’)  </p><p>#ctrl+x剪贴输入框内容<br>dr.find_element_by_id(“kw”).send_keys(Keys.CONTROL,’x’)  </p><p>#ctrl+v剪贴输入框内容<br>dr.find_element_by_id(“kw”).send_keys(Keys.CONTROL,’v’)  </p><p>#回车键操作<br>dr.find_element_by_id(“su”).send_keys(Keys.ENTER)<br>dr.close()  </p><p>常用的键盘操作整理：<br>send_keys(Keys.BACK_SPACE)  #删除键BackSpace<br>send_keys(Keys.SPACE)       #空格键Space<br>send_keys(Keys.TAB)         #制表键Tab<br>send_keys(Keys.ESCAPE)      #回退键Esc<br>send_keys(Keys.ENTER)       #回车键Enter<br>send_keys(Keys.CONTROL,’a’) #Ctrl+a<br>send_keys(Keys.CONTROL,’c’) #Ctrl+c<br>send_keys(Keys.CONTROL,’x’) #Ctrl+x<br>send_keys(Keys.CONTROL,’v’) #Ctrl+x<br>send_keys(Keys.F1)          #F1,类似的有F1-F12<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h2 id="动作"><a href="#动作" class="headerlink" title="动作"></a>动作</h2><h2 id="等待"><a href="#等待" class="headerlink" title="等待"></a>等待</h2><h3 id="显示等待"><a href="#显示等待" class="headerlink" title="显示等待"></a>显示等待</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">WebDriverWait(driver, timeout,poll_frequency,ignored_exceptions=None).until(method,message)&lt;br&gt;</span><br><span class="line">示例：&lt;br&gt;</span><br><span class="line">WebDriverWait(dr,5,0.5,None).until(&lt;br&gt;</span><br><span class="line">expected_conditions.presence_of_element_located((By.ID,&quot;kw1&quot;)),message=&apos;test&apos;)&lt;br&gt;</span><br><span class="line">解释：&lt;br&gt;</span><br><span class="line">A.WebDriverWait()：在设置时间内，默认间隔一段时间检测一次当前页面元素是否存在，若超过当前指定时间检测不到则抛出异常；&lt;br&gt;</span><br><span class="line">B.driver：webdriver的浏览器驱动，ie、firefox、chromea&lt;br&gt;</span><br><span class="line">C.timeout：最长超时时间，以秒为单位&lt;br&gt;</span><br><span class="line">D.poll_frequency：休眠间隔时间-步长，默认0.5秒&lt;br&gt;</span><br><span class="line">E.ignored_exceptions：超时后异常信息，默认抛出NoSuchElementException异常&lt;br&gt;</span><br><span class="line">F.until(method,message): 调用该方法提供的驱动作为一个参数，直到返回值为True&lt;br&gt;</span><br><span class="line">G.until_not(method,message):调用该方法提供的驱动作为一个参数，直到返回值为False&lt;br&gt;</span><br><span class="line">H.expected_conditions类提供的预期条件实现有：&lt;br&gt;</span><br><span class="line">title_is:判断标题是否是xx&lt;br&gt;</span><br><span class="line">title_contains:判断标题是否包含xx&lt;br&gt;</span><br><span class="line">presence_of_element_located：元素是否存在</span><br></pre></td></tr></table></figure><p>visibility_of_element_located：元素是否存在  </p><pre><code>visibility_of：是否可见  presence_of_all_elements_located：判断一组元素是否存在  text_to_be_present_in_element：判断元素是否有xx文本信息    text_to_be_present_in_element_value：判断元素值是否有xx文本信息    frame_to_be_available_and_switch_to_it：表单是否可见，并切换到该表单  invisibility_of_element_located：判断元素是否隐藏  element_to_be_clickable：判断元素是否点击，它处于可见和启动状态  staleness_of：等到一个元素不再依附于DOM  element_to_be_selected：被选中的元素  element_located_to_be_selected：一个期望的元素位于被选中  element_selection_state_to_be：一个期望检查如果给定元素被选中  element_located_selection_state_to_be：期望找到一个元素并检查是否是选择状态  alert_is_present：预期一个警告信息</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="隐式等待"><a href="#隐式等待" class="headerlink" title="隐式等待:"></a>隐式等待:</h3><p>通过一定的时长等待页面所有元素加载完成，哪个元素超出设置时长没被加载就抛出异常NoSuchElementException，隐式等待是针对所有元素的<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p>implicitly_wait(5)    #默认单位为秒<br>示例：<br>    dr.implicitly_wait(5)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h3 id="sleep休眠"><a href="#sleep休眠" class="headerlink" title="sleep休眠"></a>sleep休眠</h3><p>python中强制的程序等待<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p>time.sleep(4)    #默认单位秒，设置小于1秒的时间可以用小数点如sleep(0.6)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h3 id="验证码处理"><a href="#验证码处理" class="headerlink" title="验证码处理"></a>验证码处理</h3><pre><code>方法1：去掉验证码方法2：设置万能验证码方法3：使用cookie方法获取，cookie时间延长</code></pre><h3 id="截屏"><a href="#截屏" class="headerlink" title="截屏"></a>截屏</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>driver.save_screenshot(‘E:\pythonScript\images\‘+time.strftime(“%Y-%m-%d %H:%M:%S”, time.localtime())+’baidu.png’)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h2 id="Element取值"><a href="#Element取值" class="headerlink" title="Element取值"></a>Element取值</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">size 获取元素的尺寸&lt;br&gt;</span><br><span class="line">text 获取元素的文本&lt;br&gt;</span><br><span class="line">get_attribute(name) 获取属性值&lt;br&gt;</span><br><span class="line">location 获取元素坐标，先找到要获取的元素，再调用该方法&lt;br&gt;</span><br><span class="line">page_source 返回页面源码&lt;br&gt;</span><br><span class="line">driver.title 返回页面标题&lt;br&gt;</span><br><span class="line">current_url 获取当前页面的URL&lt;br&gt;</span><br><span class="line">is_displayed() 设置该元素是否可见&lt;br&gt;</span><br><span class="line">is_enabled() 判断元素是否被使用&lt;br&gt;</span><br><span class="line">is_selected() 判断元素是否被选中&lt;br&gt;</span><br><span class="line">tag_name 返回元素的tagName</span><br></pre></td></tr></table></figure><h2 id="常用函数"><a href="#常用函数" class="headerlink" title="常用函数"></a>常用函数</h2><p>1.获取当前页面的Url函数<br><br>driver.current_url</p><p>2.获取元素坐标<br><br>driver.find_element_by_id(‘selenium’).location</p><p>3.表单的提交<br><br>driver.find_element_by_id(‘selenium’).submit()</p><p>4.获取CSS的属性值<br><br>driver.find_element_by_css_selector(“input.btn”).value_of_css_property(“input.btn”)</p><p>5.获取元素的属性值<br><br>driver.find_element_by_id(‘selenium’).get_attribute(“selenium”)</p><p>6.判断元素是否被选中<br><br>driver.find_element_by_id(“form1”).is_selected()</p><p>7.返回元素的大小<br><br>driver.find_element_by_id(“iptPassword”).size<br><br>//返回值：{‘width’: 250, ‘height’: 30}</p><p>8.判断元素是否显示<br><br>driver.find_element_by_id(“iptPassword”).is_displayed()</p><p>9.判断元素是否被使用<br><br>driver.find_element_by_id(“iptPassword”).is_enabled()</p><p>10.获取元素的文本值 driver.find_element_by_id(“iptUsername”).text</p><p>11.元素赋值<br><br>driver.find_element_by_id(“iptUsername”).send_keys(‘admin’)</p><p>12.返回元素的tagName<br><br>driver.find_element_by_id(“iptUsername”).tag_name</p><p>13.删除浏览器所有的cookies<br><br>driver.delete_all_cookies()</p><p>14.删除指定的cookie<br><br>deriver.delete_cookie(“my_cookie_name”)</p><p>15.关闭浏览器<br><br>driver.close()</p><p>16.关闭浏览器并且推出驱动程序<br><br>driver.quit()</p><p>17.返回上一页<br><br>driver.back()</p><p>18.设置等待超时<br><br>driver.implicitly_wait(30)</p><p>19.浏览器窗口最大化<br><br>driver.maximize_window()</p><p>20.查看浏览器的名字<br><br>drvier.name</p><h2 id="selenium版本进行降级"><a href="#selenium版本进行降级" class="headerlink" title="selenium版本进行降级"></a>selenium版本进行降级</h2><p>降级方法如下：</p><p>1)查看当前的selenium版本打开终端，输入 pip show selenium python3 -m pip show selenium python2.7 -m pip show selenium 2）删除当前python下的selenium版本为了避免与之前安装的selenium版本冲突，先找到selenium3.0目录：python\Lib\site-packages目录把里面selenium开头的文件全部删除就可以了。python所有的第三方包都在这个目录下面。selenium相关的目录全部删除。 3）打开终端，输入 pip install selenium==2.53.6 （注意是两个==，中间不要留空格，这里推荐2.53.6的版本） python3 pip install selenium==2.53.6 python2.7 pip install selenium==2.53.6</p><h2 id="IE报错"><a href="#IE报错" class="headerlink" title="IE报错"></a>IE报错</h2><p>File “D:\goodgoodstudy\Python35\lib\site-packages\selenium\webdriver\remote\webdriver.py”, line 248, in get self.execute(Command.GET, {‘url’: url}) File “D:\goodgoodstudy\Python35\lib\site-packages\selenium\webdriver\remote\webdriver.py”, line 236, in execute self.error_handler.check_response(response) File “D:\goodgoodstudy\Python35\lib\site-packages\selenium\webdriver\remote\errorhandler.py”, line 192, in check_response raise exception_class(message, screen, stacktrace) selenium.common.exceptions.WebDriverException: Message: Failed to navigate to <a href="https://www.baidu.com" target="_blank" rel="noopener">https://www.baidu.com</a>. This usually means that a call to the COM method IWebBrowser2::Navigate2() failed.</p><p>该错误是需要在DCOM组件服务器中给Internet Explorer授权。操作如下： （1）打开开始菜单的运行对话框，输入dcomcnfg命令，确定，这时会弹出组件服务窗口 （2）展开计算机-〉我的电脑-〉DCOM配置，找到Internet Explorer应用程序节点 （3）单击右键-〉属性，选中”安全”选项，在下面三个项目都选择”自定义”，并单击编辑按钮 （4）在启动权限对话框中查看用户权限，全部给到最大权限。 （5） 选择”身份标识”,再选择”交互式用户”即可</p><p>以上完美解决了能打开浏览器但是一直不能获取到地址的问题。 from selenium.webdriver.common.desired_capabilities import DesiredCapabilities DesiredCapabilities.INTERNETEXPLORER[‘ignoreProtectedModeSettings’] = True</p><p>System.setProperty(“webdriver.chrome.driver”, “files/chromedriver.exe”); ChromeOptions options = new ChromeOptions(); options.setBinary(“C:/Chrome/Application/chrome.exe”); ChromeDriver driver = new ChromeDriver(options);</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- # selenium python --&gt;
&lt;h2 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h2&gt;&lt;h2 id=&quot;启动&quot;&gt;&lt;a href=&quot;#启动&quot; class=&quot;headerlink&quot; t
      
    
    </summary>
    
      <category term="code" scheme="http://yoursite.com/categories/code/"/>
    
    
      <category term="python3" scheme="http://yoursite.com/tags/python3/"/>
    
      <category term="selenium" scheme="http://yoursite.com/tags/selenium/"/>
    
  </entry>
  
  <entry>
    <title>python3随机生成手机号</title>
    <link href="http://yoursite.com/2018/python3%E9%9A%8F%E6%9C%BA%E7%94%9F%E6%88%90%E6%89%8B%E6%9C%BA%E5%8F%B7.html"/>
    <id>http://yoursite.com/2018/python3随机生成手机号.html</id>
    <published>2018-12-12T00:00:00.000Z</published>
    <updated>2019-11-22T08:42:10.144Z</updated>
    
    <content type="html"><![CDATA[<!-- # python3随机生成手机号 --><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">获取随机手机号方法</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">MDN号码的结构如下：CC + MAC + H0 H1 H2 H3 + ABCD：</span></span><br><span class="line"><span class="string">【CC】：国家码，中国使用86。</span></span><br><span class="line"><span class="string">【MAC】：移动接入码，本网采用网号方案，为133。</span></span><br><span class="line"><span class="string">【H0H1H2H3】：HLR识别码，由运营商统一分配。</span></span><br><span class="line"><span class="string">【ABCD】：移动用户号，由各HLR自行分配。</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="comment"># 号段列表</span></span><br><span class="line">macid_list = [</span><br><span class="line">    <span class="string">'133'</span>, <span class="string">'149'</span>, <span class="string">'153'</span>, <span class="string">'173'</span>, <span class="string">'177'</span>, <span class="string">'180'</span>, <span class="string">'181'</span>, <span class="string">'189'</span>, <span class="string">'199'</span>, <span class="string">'130'</span>,</span><br><span class="line">    <span class="string">'131'</span>, <span class="string">'132'</span>, <span class="string">'145'</span>, <span class="string">'155'</span>, <span class="string">'156'</span>, <span class="string">'166'</span>, <span class="string">'171'</span>, <span class="string">'175'</span>, <span class="string">'176'</span>, <span class="string">'185'</span>,</span><br><span class="line">    <span class="string">'186'</span>, <span class="string">'166'</span>, <span class="string">'134'</span>, <span class="string">'135'</span>, <span class="string">'136'</span>, <span class="string">'137'</span>, <span class="string">'138'</span>, <span class="string">'139'</span>, <span class="string">'147'</span>, <span class="string">'150'</span>,</span><br><span class="line">    <span class="string">'151'</span>, <span class="string">'152'</span>, <span class="string">'157'</span>, <span class="string">'158'</span>, <span class="string">'159'</span>, <span class="string">'172'</span>, <span class="string">'178'</span>, <span class="string">'182'</span>, <span class="string">'183'</span>, <span class="string">'184'</span>,</span><br><span class="line">    <span class="string">'187'</span>, <span class="string">'188'</span>, <span class="string">'198'</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取随机手机号</span></span><br><span class="line"><span class="comment"># return int</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_phone</span><span class="params">(macid=None)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> macid <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        macid = macid_list[random.randint(<span class="number">0</span>, len(macid_list) - <span class="number">1</span>)]</span><br><span class="line">    <span class="comment"># 地区4位，取本机月日</span></span><br><span class="line">    H0H1H2H3 = time.strftime(<span class="string">"%m"</span>).zfill(<span class="number">2</span>) + time.strftime(<span class="string">"%d"</span>).zfill(<span class="number">2</span>)</span><br><span class="line">    <span class="comment"># a_list = range(1, 10)</span></span><br><span class="line">    <span class="comment"># 随机4位数，zfill方法使高位补0</span></span><br><span class="line">    ABCD = str(random.randint(<span class="number">0</span>, <span class="number">9999</span>)).zfill(<span class="number">4</span>)</span><br><span class="line">    phone = str(macid) + H0H1H2H3 + ABCD</span><br><span class="line">    <span class="keyword">return</span> int(phone)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    get_phone()</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- # python3随机生成手机号 --&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;li
      
    
    </summary>
    
      <category term="code" scheme="http://yoursite.com/categories/code/"/>
    
    
      <category term="python3" scheme="http://yoursite.com/tags/python3/"/>
    
      <category term="phone number" scheme="http://yoursite.com/tags/phone-number/"/>
    
  </entry>
  
  <entry>
    <title>python3随机生成银行卡号</title>
    <link href="http://yoursite.com/2018/python3%E9%9A%8F%E6%9C%BA%E7%94%9F%E6%88%90%E9%93%B6%E8%A1%8C%E5%8D%A1%E5%8F%B7.html"/>
    <id>http://yoursite.com/2018/python3随机生成银行卡号.html</id>
    <published>2018-12-12T00:00:00.000Z</published>
    <updated>2019-11-22T08:42:10.150Z</updated>
    
    <content type="html"><![CDATA[<!-- # python3随机生成银行卡号 --><p>做一个声明，这个只用于内部测试！</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">随机银行卡</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="keyword">import</span> copy</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># 维萨卡（VISACARD）</span></span><br><span class="line">VISA_PREFIX_LIST = [</span><br><span class="line">    <span class="string">"4539"</span>, <span class="string">"4556"</span>, <span class="string">"4916"</span>, <span class="string">"4532"</span>, <span class="string">"4929"</span>, <span class="string">"40240071"</span>, <span class="string">"4485"</span>, <span class="string">"4716"</span>, <span class="string">"4"</span></span><br><span class="line">]</span><br><span class="line"><span class="comment"># 万事达卡（MasterCard）</span></span><br><span class="line">MASTERCARD_PREFIX_LIST = [<span class="string">"51"</span>, <span class="string">"52"</span>, <span class="string">"53"</span>, <span class="string">"54"</span>, <span class="string">"55"</span>]</span><br><span class="line"><span class="comment"># 美国运通卡（AmericanExpressCard）</span></span><br><span class="line">AMEX_PREFIX_LIST = [<span class="string">"34"</span>, <span class="string">"37"</span>]</span><br><span class="line"><span class="comment"># 发现卡(Discover Card)</span></span><br><span class="line">DISCOVER_PREFIX_LIST = [<span class="string">"6011"</span>]</span><br><span class="line"><span class="comment"># 大莱卡（DinersCard）</span></span><br><span class="line">DINERS_PREFIX_LIST = [<span class="string">"300"</span>, <span class="string">"301"</span>, <span class="string">"302"</span>, <span class="string">"303"</span>, <span class="string">"36"</span>, <span class="string">"38"</span>]</span><br><span class="line"><span class="comment"># enRoute（credit card issued by Air Canada until 1992）</span></span><br><span class="line">ENROUTE_PREFIX_LIST = [<span class="string">"2014"</span>, <span class="string">"2149"</span>]</span><br><span class="line"><span class="comment"># JCB卡（JAPANCREDITBUREAUCARD）</span></span><br><span class="line">JCB_PREFIX_LIST = [<span class="string">"35"</span>]</span><br><span class="line"><span class="comment"># Voyager Credit Card</span></span><br><span class="line">VOYAGER_PREFIX_LIST = [<span class="string">"8699"</span>]</span><br><span class="line"><span class="comment"># 中国银联</span></span><br><span class="line">China_UnionPay_PREFIX_LIST = [<span class="string">"62"</span>]</span><br><span class="line"><span class="comment"># 常用</span></span><br><span class="line">CUP_PREFIX_LIST = &#123;</span><br><span class="line">    <span class="string">'622220'</span>: <span class="string">'中国工商银行'</span>,</span><br><span class="line">    <span class="string">'622258'</span>: <span class="string">'中国交通银行'</span>,</span><br><span class="line">    <span class="string">'622707'</span>: <span class="string">'中国建设银行'</span>,</span><br><span class="line">    <span class="string">'622580'</span>: <span class="string">'中国招商银行'</span>,</span><br><span class="line">    <span class="string">'622150'</span>: <span class="string">'中国邮政储蓄银行'</span>,</span><br><span class="line">    <span class="string">'622273'</span>: <span class="string">'中国银行'</span>,</span><br><span class="line">    <span class="string">'623058'</span>: <span class="string">'平安银行'</span></span><br><span class="line">&#125;</span><br><span class="line">BANK_CODE_LIST = &#123;</span><br><span class="line">    <span class="string">'CCB'</span>: <span class="string">'中国建设银行'</span>,</span><br><span class="line">    <span class="string">'ABC'</span>: <span class="string">'中国农业银行'</span>,</span><br><span class="line">    <span class="string">'ICBC'</span>: <span class="string">'中国工商银行'</span>,</span><br><span class="line">    <span class="string">'CDB'</span>: <span class="string">'国家开发银行'</span>,</span><br><span class="line">    <span class="string">'BCCB'</span>: <span class="string">'北京市商业银行'</span>,</span><br><span class="line">    <span class="string">'HSBC'</span>: <span class="string">'汇丰银行'</span>,</span><br><span class="line">    <span class="string">'PBC'</span>: <span class="string">'中国人民银行'</span>,</span><br><span class="line">    <span class="string">'BOC'</span>: <span class="string">'中国银行'</span>,</span><br><span class="line">    <span class="string">'CMBC'</span>: <span class="string">'中国民生银行'</span>,</span><br><span class="line">    <span class="string">'CMB'</span>: <span class="string">'招商银行'</span>,</span><br><span class="line">    <span class="string">'CIB'</span>: <span class="string">'兴业银行'</span>,</span><br><span class="line">    <span class="string">'BCM'</span>: <span class="string">'交通银行'</span>,</span><br><span class="line">    <span class="string">'CEB'</span>: <span class="string">'中国光大银行'</span>,</span><br><span class="line">    <span class="string">'GDB'</span>: <span class="string">'广东发展银行'</span>,</span><br><span class="line">    <span class="string">'SPABANK'</span>: <span class="string">'平安银行'</span></span><br><span class="line">&#125;</span><br><span class="line">CARD_TYPE_LIST = &#123;<span class="string">'DC'</span>: <span class="string">"储蓄卡"</span>, <span class="string">'CC'</span>: <span class="string">"信用卡"</span>, <span class="string">'SCC'</span>: <span class="string">"准贷记卡"</span>, <span class="string">'PC'</span>: <span class="string">"预付费卡"</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">completed_number</span><span class="params">(ccnumber, length)</span>:</span></span><br><span class="line">    <span class="comment"># generate digits</span></span><br><span class="line">    <span class="keyword">while</span> len(ccnumber) &lt; (length - <span class="number">1</span>):</span><br><span class="line">        digit = str(random.randint(<span class="number">0</span>, <span class="number">9</span>))</span><br><span class="line">        ccnumber = ccnumber + digit</span><br><span class="line">    <span class="comment"># Calculate sum</span></span><br><span class="line">    sum = <span class="number">0</span></span><br><span class="line">    pos = <span class="number">0</span></span><br><span class="line">    reversed_ccnumber = []</span><br><span class="line">    reversed_ccnumber.extend(ccnumber)</span><br><span class="line">    reversed_ccnumber.reverse()</span><br><span class="line">    <span class="keyword">while</span> pos &lt; length - <span class="number">1</span>:</span><br><span class="line">        <span class="comment"># 卡号从右往左看，偶数位数乘以2</span></span><br><span class="line">        odd = int(reversed_ccnumber[pos]) * <span class="number">2</span></span><br><span class="line">        <span class="comment"># 如果乘以2后的数为两位数(值大于9)则减去9</span></span><br><span class="line">        <span class="keyword">if</span> odd &gt; <span class="number">9</span>:</span><br><span class="line">            odd -= <span class="number">9</span></span><br><span class="line">        <span class="comment"># 然后将所有的位数进行累加</span></span><br><span class="line">        sum += odd</span><br><span class="line">        <span class="keyword">if</span> pos != (length - <span class="number">2</span>):</span><br><span class="line">            sum += int(reversed_ccnumber[pos + <span class="number">1</span>])</span><br><span class="line">        <span class="comment"># 偶数位从0开始，加2循环</span></span><br><span class="line">        pos += <span class="number">2</span></span><br><span class="line">    <span class="comment"># Calculate check digit</span></span><br><span class="line">    <span class="comment"># 最后一位当做是校验位，用来补齐到能够整除10</span></span><br><span class="line">    <span class="comment"># TODO</span></span><br><span class="line">    <span class="comment"># t = 10 - sum % 10</span></span><br><span class="line">    <span class="comment"># ccnumber += str(0 if t == 10 else t)</span></span><br><span class="line">    <span class="comment"># math.floor 向下取整</span></span><br><span class="line">    checkdigit = int(((math.floor(sum / <span class="number">10</span>) + <span class="number">1</span>) * <span class="number">10</span> - sum) % <span class="number">10</span>)</span><br><span class="line">    ccnumber = str(ccnumber) + str(checkdigit)</span><br><span class="line">    <span class="comment"># TODO end</span></span><br><span class="line">    <span class="keyword">return</span> ccnumber</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_bank_number</span><span class="params">(prefixList=None, length=None)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> prefixList <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        prefixList = list(CUP_PREFIX_LIST.keys())</span><br><span class="line">    <span class="keyword">if</span> length <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        length = <span class="number">16</span></span><br><span class="line">    ccnumber = copy.copy(random.choice(prefixList))</span><br><span class="line">    ccnumber = <span class="string">'622707'</span></span><br><span class="line">    bank_number = completed_number(ccnumber, length)</span><br><span class="line">    <span class="keyword">return</span> bank_number</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">is_bank_number</span><span class="params">(bank_number)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        url = <span class="string">'https://ccdcapi.alipay.com/validateAndCacheCardInfo.json?\</span></span><br><span class="line"><span class="string">        _input_charset=utf-8&amp;cardNo=%s&amp;cardBinCheck=true'</span> % bank_number</span><br><span class="line">        r = requests.get(url)</span><br><span class="line">        data = r.text</span><br><span class="line">        data = json.loads(data)</span><br><span class="line">        <span class="comment"># print(data)</span></span><br><span class="line">        validated = data[<span class="string">'validated'</span>]</span><br><span class="line">        cardType = <span class="literal">None</span></span><br><span class="line">        bank = <span class="literal">None</span></span><br><span class="line">        <span class="keyword">if</span> validated <span class="keyword">is</span> <span class="literal">True</span>:</span><br><span class="line">            cardType = CARD_TYPE_LIST[data[<span class="string">'cardType'</span>]]</span><br><span class="line">            bank = BANK_CODE_LIST[data[<span class="string">'bank'</span>]]</span><br><span class="line">            print(cardType, bank)</span><br><span class="line">        <span class="keyword">return</span> validated, cardType, bank</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">if</span> isinstance(bank_number, int):</span><br><span class="line">            bank_number = str(bank_number)</span><br><span class="line">        mod10Count = <span class="number">0</span></span><br><span class="line">        reversed_ccnumber = list(reversed(bank_number))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(bank_number) - <span class="number">1</span>):</span><br><span class="line">            augend = reversed_ccnumber[i]</span><br><span class="line">            <span class="keyword">if</span> ((i + <span class="number">1</span>) % <span class="number">2</span>) == <span class="number">0</span>:</span><br><span class="line">                productString = str(augend * <span class="number">2</span>)</span><br><span class="line">                augend = <span class="number">0</span></span><br><span class="line">                <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>, len(productString)):</span><br><span class="line">                    augend += int(productString[j])</span><br><span class="line">            mod10Count += int(augend)</span><br><span class="line">        digits = [int(x) <span class="keyword">for</span> x <span class="keyword">in</span> reversed(str(bank_number))]</span><br><span class="line">        check_sum = sum(digits[::<span class="number">2</span>]) + sum(</span><br><span class="line">            (dig // <span class="number">10</span> + dig % <span class="number">10</span>) <span class="keyword">for</span> dig <span class="keyword">in</span> [<span class="number">2</span> * el <span class="keyword">for</span> el <span class="keyword">in</span> digits[<span class="number">1</span>::<span class="number">2</span>]])</span><br><span class="line">        print(check_sum, mod10Count)</span><br><span class="line">        <span class="keyword">return</span> (mod10Count % <span class="number">10</span>) == <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    bank_number = <span class="string">'6217000010104124329'</span></span><br><span class="line">    bank_number = get_bank_number()</span><br><span class="line">    print(bank_number)</span><br><span class="line">    print(is_bank_number(bank_number))</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- # python3随机生成银行卡号 --&gt;
&lt;p&gt;做一个声明，这个只用于内部测试！&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;
      
    
    </summary>
    
      <category term="code" scheme="http://yoursite.com/categories/code/"/>
    
    
      <category term="python3" scheme="http://yoursite.com/tags/python3/"/>
    
      <category term="bank card" scheme="http://yoursite.com/tags/bank-card/"/>
    
  </entry>
  
  <entry>
    <title>Git</title>
    <link href="http://yoursite.com/2018/tools%20git.html"/>
    <id>http://yoursite.com/2018/tools git.html</id>
    <published>2018-12-12T00:00:00.000Z</published>
    <updated>2019-11-22T08:42:10.157Z</updated>
    
    <content type="html"><![CDATA[<!-- # Git --><hr><h2 id="生成公钥"><a href="#生成公钥" class="headerlink" title="生成公钥"></a>生成公钥</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">"shineniefei@qq.com"</span></span><br></pre></td></tr></table></figure><p>一路Enter~别输入内容（默认密码空，默认用户位置）</p><h2 id="查看公钥"><a href="#查看公钥" class="headerlink" title="查看公钥"></a>查看公钥</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看公钥，屏幕打印出来的内容</span></span><br><span class="line">cat ~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure><h2 id="将公钥添加到git"><a href="#将公钥添加到git" class="headerlink" title="将公钥添加到git"></a>将公钥添加到git</h2><ol><li>复制查看到的公钥</li><li>登录网页版，点击Settings - SSH and GPG keys - New SSH key,新建公钥,粘贴，保存</li><li><p>测试是否联通</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure></li></ol><h2 id="本地配置用户"><a href="#本地配置用户" class="headerlink" title="本地配置用户"></a>本地配置用户</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.email <span class="string">"shineniefei@qq.com"</span></span><br><span class="line">git config --global user.name <span class="string">"shineniefei"</span></span><br></pre></td></tr></table></figure><h2 id="克隆项目clone"><a href="#克隆项目clone" class="headerlink" title="克隆项目clone"></a>克隆项目clone</h2><ol><li>登录网页版，进入项目的首页，选择ssh方式 <a href="mailto:git@git.oschina.shineniefei" target="_blank" rel="noopener">git@git.oschina.shineniefei</a>/bccnui.git</li><li><p>进入本地工作目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># clone 项目</span></span><br><span class="line">git <span class="built_in">clone</span> git@git.oschina.shineniefei/bccnui.git</span><br><span class="line"><span class="comment"># 从远程获取最新版本到本地</span></span><br><span class="line">git pull origin master</span><br></pre></td></tr></table></figure></li></ol><h2 id="本地仓库关联远程库"><a href="#本地仓库关联远程库" class="headerlink" title="本地仓库关联远程库"></a>本地仓库关联远程库</h2><ol><li>登录网页版，进入项目的首页，选择ssh方式 <a href="mailto:git@git.oschina.shineniefei" target="_blank" rel="noopener">git@git.oschina.shineniefei</a>/bccnui.git</li><li><p>进入本地工作目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 本地仓库关联远程库,远程库的名字就是origin。</span></span><br><span class="line">git remote add origin git@git.oschina.shineniefei/bccnui.git</span><br><span class="line"><span class="comment"># 从远程的origin的master主分支下载最新的版本到origin/master分支上,fetch会自动merge</span></span><br><span class="line">git fetch origin master</span><br><span class="line"><span class="comment"># 比较本地的master分支和origin/master分支的差别</span></span><br><span class="line">git <span class="built_in">log</span> -p master..origin/master</span><br><span class="line"><span class="comment"># 进行合并</span></span><br><span class="line">git merge origin/master</span><br></pre></td></tr></table></figure><p><em>上述过程其实可以用以下更清晰的方式来进行：</em></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#从远程获取最新的版本到本地的tem分支上,之后再进行比较合并</span></span><br><span class="line">git fetch origin master:tmp</span><br><span class="line">git diff tmp</span><br><span class="line">git merge tmp</span><br></pre></td></tr></table></figure></li></ol><h2 id="本地创建一个版本库"><a href="#本地创建一个版本库" class="headerlink" title="本地创建一个版本库"></a>本地创建一个版本库</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 新建项目目录</span></span><br><span class="line">mkdir exemple</span><br><span class="line"><span class="comment"># 切换目录</span></span><br><span class="line"><span class="built_in">cd</span> exemple</span><br><span class="line"><span class="comment"># 初始化GIT仓库</span></span><br><span class="line">git init</span><br><span class="line"><span class="comment"># 加入文件到仓库</span></span><br><span class="line">git add README.md</span><br><span class="line"><span class="comment"># 提交暂存带注释</span></span><br><span class="line">git commit -m <span class="string">"说明"</span></span><br></pre></td></tr></table></figure><h2 id="git命令"><a href="#git命令" class="headerlink" title="git命令"></a>git命令</h2><h3 id="pull"><a href="#pull" class="headerlink" title="pull"></a>pull</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 从远程获取最新版本并merge到本地</span></span><br><span class="line">git pull origin master</span><br></pre></td></tr></table></figure><p><em>上述命令其实相当于git fetch 和 git merge</em><br><br><em>在实际使用中，git fetch更安全一些</em><br><br><em>因为在merge前，我们可以查看更新情况，然后再决定是否合并</em></p><h3 id="push"><a href="#push" class="headerlink" title="push"></a>push</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 本地库的所有内容推送到远程库,u选项会指定一个默认主机</span></span><br><span class="line">git push -u origin master</span><br><span class="line"><span class="comment"># 本地库的所有内容推送到远程库</span></span><br><span class="line">git push origin master</span><br><span class="line"><span class="comment"># 默认只推送当前分支</span></span><br><span class="line">git push</span><br></pre></td></tr></table></figure><h3 id="log"><a href="#log" class="headerlink" title="log"></a>log</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看提交日志</span></span><br><span class="line">git <span class="built_in">log</span></span><br><span class="line"><span class="comment"># 以一行显示日志</span></span><br><span class="line">git <span class="built_in">log</span> --pretty=oneline</span><br><span class="line"><span class="comment"># 查看分支合并图</span></span><br><span class="line">git <span class="built_in">log</span> --graph</span><br></pre></td></tr></table></figure><h3 id="reset"><a href="#reset" class="headerlink" title="reset"></a>reset</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 退回上一版本</span></span><br><span class="line">git reset --hard HEAD^</span><br><span class="line"><span class="comment"># 退回上上版本</span></span><br><span class="line">git reset --hard HEAD^^</span><br><span class="line"><span class="comment"># 退回10个版本</span></span><br><span class="line">git reset --hard HEAD~10</span><br><span class="line"><span class="comment"># 指定到某个xxx版本</span></span><br><span class="line">git reset --hard xxx</span><br><span class="line"><span class="comment"># 撤销（unstage）暂存区</span></span><br><span class="line">git reset HEAD readme.txt</span><br></pre></td></tr></table></figure><h3 id="reflog"><a href="#reflog" class="headerlink" title="reflog"></a>reflog</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 用来记录你的每一次命令</span></span><br><span class="line">git reflog</span><br></pre></td></tr></table></figure><h3 id="status"><a href="#status" class="headerlink" title="status"></a>status</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看仓库状态，查看冲突</span></span><br><span class="line">git status</span><br></pre></td></tr></table></figure><h3 id="rm"><a href="#rm" class="headerlink" title="rm"></a>rm</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除文件</span></span><br><span class="line">git rm readme.txt</span><br><span class="line"><span class="comment"># 提交删除的内容</span></span><br><span class="line">git commit -m <span class="string">"删除readme.txt"</span></span><br></pre></td></tr></table></figure><h3 id="checkout"><a href="#checkout" class="headerlink" title="checkout"></a>checkout</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 撤销add和commit的内容</span></span><br><span class="line"><span class="comment"># 恢复删除的内容</span></span><br><span class="line">git checkout -- readme.txt</span><br><span class="line"><span class="comment"># 创建dev分支，然后切换到dev分支：</span></span><br><span class="line">git checkout -b dev</span><br><span class="line"><span class="comment"># 切换回master分支</span></span><br><span class="line">git checkout master</span><br></pre></td></tr></table></figure><p><em>git checkout -b参数表示创建并切换，相当于以下两条命令：</em><br><br><em>git branch dev</em><br><br><em>git checkout dev</em></p><h3 id="branch"><a href="#branch" class="headerlink" title="branch"></a>branch</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看当前分支</span></span><br><span class="line">git branch</span><br><span class="line"><span class="comment"># 创建分支</span></span><br><span class="line">git branch &lt;name&gt;</span><br><span class="line"><span class="comment"># 删除分支</span></span><br><span class="line">git branch -d &lt;name&gt;</span><br></pre></td></tr></table></figure><h3 id="merge"><a href="#merge" class="headerlink" title="merge"></a>merge</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 合并dev分支内容到当前分支</span></span><br><span class="line">git merge dev</span><br></pre></td></tr></table></figure><h2 id="remote"><a href="#remote" class="headerlink" title="remote"></a>remote</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除远程 Git 仓库</span></span><br><span class="line">git remote rm origin</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- # Git --&gt;
&lt;hr&gt;
&lt;h2 id=&quot;生成公钥&quot;&gt;&lt;a href=&quot;#生成公钥&quot; class=&quot;headerlink&quot; title=&quot;生成公钥&quot;&gt;&lt;/a&gt;生成公钥&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td
      
    
    </summary>
    
      <category term="tools" scheme="http://yoursite.com/categories/tools/"/>
    
    
      <category term="Git" scheme="http://yoursite.com/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>vim</title>
    <link href="http://yoursite.com/2018/tools%20vim.html"/>
    <id>http://yoursite.com/2018/tools vim.html</id>
    <published>2018-12-12T00:00:00.000Z</published>
    <updated>2019-11-22T08:42:10.159Z</updated>
    
    <content type="html"><![CDATA[<h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>内容来自网络总结</p><h2 id="状态模式"><a href="#状态模式" class="headerlink" title="状态模式"></a>状态模式</h2><table><thead><tr><th style="text-align:center">按键</th><th style="text-align:left">作用</th></tr></thead><tbody><tr><td style="text-align:center">  i</td><td style="text-align:left">进入 插入 模式</td></tr><tr><td style="text-align:center">  ni</td><td style="text-align:left">进入 重复插入 模式</td></tr><tr><td style="text-align:center"> ESC</td><td style="text-align:left">返回 命令 模式</td></tr><tr><td style="text-align:center">  v</td><td style="text-align:left">进入 可视 模式</td></tr><tr><td style="text-align:center">  V</td><td style="text-align:left">进入 行可视 模式</td></tr><tr><td style="text-align:center">CTRL+v</td><td style="text-align:left">进入 块可视 作模式</td></tr><tr><td style="text-align:center"> Ixxx</td><td style="text-align:left">在被选中的块的前面插入xxx</td></tr><tr><td style="text-align:center">0Ixxx</td><td style="text-align:left">在被选中的块的每一行的行首插入xxx</td></tr><tr><td style="text-align:center"> Axxx</td><td style="text-align:left">在被选中的块的后面追加xxx</td></tr></tbody></table><h2 id="光标控制"><a href="#光标控制" class="headerlink" title="光标控制"></a>光标控制</h2><table><thead><tr><th style="text-align:center">按键</th><th style="text-align:left">作用</th></tr></thead><tbody><tr><td style="text-align:center">   k</td><td style="text-align:left">向上移一行</td></tr><tr><td style="text-align:center">   j</td><td style="text-align:left">向下移一行</td></tr><tr><td style="text-align:center">   h</td><td style="text-align:left">向左移一列</td></tr><tr><td style="text-align:center">   l</td><td style="text-align:left">向右移一列</td></tr><tr><td style="text-align:center">  nk</td><td style="text-align:left">向上移动n行</td></tr><tr><td style="text-align:center">  nh</td><td style="text-align:left">向左移动n列</td></tr><tr><td style="text-align:center">  gg</td><td style="text-align:left">移到到第一行</td></tr><tr><td style="text-align:center">   G</td><td style="text-align:left">移到文件的最后一行</td></tr><tr><td style="text-align:center">nG或<code>:</code>n</td><td style="text-align:left">移到文件的第n行</td></tr><tr><td style="text-align:center">   L</td><td style="text-align:left">移到屏幕的最后一行</td></tr><tr><td style="text-align:center">   M</td><td style="text-align:left">移到屏幕的中间一行</td></tr><tr><td style="text-align:center">   H</td><td style="text-align:left">移到屏幕的第一行</td></tr><tr><td style="text-align:center">   (</td><td style="text-align:left">移到句子的开头</td></tr><tr><td style="text-align:center">   )</td><td style="text-align:left">移到句子的结尾</td></tr><tr><td style="text-align:center">   {</td><td style="text-align:left">移到段落的开头</td></tr><tr><td style="text-align:center">   }</td><td style="text-align:left">移到下一个段落开头</td></tr><tr><td style="text-align:center">   %</td><td style="text-align:left">移动到与制匹配的括号上去（），{}，[]，&lt;&gt;等</td></tr><tr><td style="text-align:center">   0</td><td style="text-align:left">移到当前行的开头</td></tr><tr><td style="text-align:center">  n`</td><td style="text-align:left">`</td><td>移到当前行的第n列</td></tr><tr><td style="text-align:center">   $</td><td style="text-align:left">移到当前行的最后(块模式下，$将块选择中的每一行都扩展至行尾)</td></tr><tr><td style="text-align:center">  n$</td><td style="text-align:left">移动到第n行的行尾</td></tr><tr><td style="text-align:center">   ^</td><td style="text-align:left">移到当前行的第一个非空字符</td></tr><tr><td style="text-align:center">   e</td><td style="text-align:left">向后移一个单词到结尾</td></tr><tr><td style="text-align:center">  ne</td><td style="text-align:left">向后移n个单词到结尾</td></tr><tr><td style="text-align:center">   E</td><td style="text-align:left">向后移一个单词到结尾，忽略标点符号</td></tr><tr><td style="text-align:center">   b</td><td style="text-align:left">向前移一个单词到开头</td></tr><tr><td style="text-align:center">  nb</td><td style="text-align:left">向前移n个单词到开头</td></tr><tr><td style="text-align:center">   B</td><td style="text-align:left">向前移一个单词到开头，忽略标点符号</td></tr><tr><td style="text-align:center">   w</td><td style="text-align:left">向后移一个单词到开头</td></tr><tr><td style="text-align:center">   W</td><td style="text-align:left">向后移一个单词到开头，忽略标点符号</td></tr><tr><td style="text-align:center">+或Enter</td><td style="text-align:left">移到下一行的第一个字符</td></tr><tr><td style="text-align:center">  <code>-</code></td><td style="text-align:left">移到前一行的第一个非空字符</td></tr><tr><td style="text-align:center">  [[</td><td style="text-align:left">光标跳转到代码块开头即{处,要求{独占一行</td></tr><tr><td style="text-align:center">  gD</td><td style="text-align:left">光标跳转到局部变量定义处</td></tr><tr><td style="text-align:center">  ‘’</td><td style="text-align:left">光标跳转到上次停靠处</td></tr><tr><td style="text-align:center"> ggVG</td><td style="text-align:left">全选文本</td></tr><tr><td style="text-align:center"> gg=G</td><td style="text-align:left">排版文本</td></tr></tbody></table><h2 id="屏幕调整"><a href="#屏幕调整" class="headerlink" title="屏幕调整"></a>屏幕调整</h2><table><thead><tr><th style="text-align:center">按键</th><th style="text-align:left">作用</th></tr></thead><tbody><tr><td style="text-align:center">    H</td><td style="text-align:left">将光标移动到屏幕的顶行</td></tr><tr><td style="text-align:center">   nH</td><td style="text-align:left">将光标移动到屏幕顶行下的第n行</td></tr><tr><td style="text-align:center">    M</td><td style="text-align:left">将光标移动到屏幕的中间</td></tr><tr><td style="text-align:center">    L</td><td style="text-align:left">将光标移动到屏幕的底行</td></tr><tr><td style="text-align:center">   nL</td><td style="text-align:left">将光标移动到屏幕底行上的第n行</td></tr><tr><td style="text-align:center"> CTRL+e</td><td style="text-align:left">将屏幕上滚一行</td></tr><tr><td style="text-align:center"> CTRL+y</td><td style="text-align:left">将屏幕下滚一行</td></tr><tr><td style="text-align:center"> CTRL+u</td><td style="text-align:left">将屏幕上滚半页</td></tr><tr><td style="text-align:center"> CTRL+d</td><td style="text-align:left">将屏幕下滚半页</td></tr><tr><td style="text-align:center"> CTRL+b</td><td style="text-align:left">将屏幕上滚一页</td></tr><tr><td style="text-align:center"> CTRL+f</td><td style="text-align:left">将屏幕下滚一页</td></tr><tr><td style="text-align:center"> CTRL+l</td><td style="text-align:left">重绘屏幕</td></tr><tr><td style="text-align:center">z+RETURN</td><td style="text-align:left">将光标所在的那一行移至屏幕顶部</td></tr><tr><td style="text-align:center">z-RETURN</td><td style="text-align:left">将当前行置为屏幕的顶行</td></tr><tr><td style="text-align:center">nz-RETURN</td><td style="text-align:left">将当前行下的第n行置为屏幕的顶行</td></tr><tr><td style="text-align:center">   z.</td><td style="text-align:left">将当前行置为屏幕的中央</td></tr><tr><td style="text-align:center">   nz.</td><td style="text-align:left">将当前行上的第n行置为屏幕的中央</td></tr><tr><td style="text-align:center">   z-</td><td style="text-align:left">将当前行置为屏幕的底行</td></tr><tr><td style="text-align:center">   nz-</td><td style="text-align:left">将当前行上的第n行置为屏幕的底行</td></tr></tbody></table><h2 id="插入文本"><a href="#插入文本" class="headerlink" title="插入文本"></a>插入文本</h2><table><thead><tr><th>按键</th><th style="text-align:left">作用</th></tr></thead><tbody><tr><td>a</td><td style="text-align:left">在光标后插入文本</td></tr><tr><td>i</td><td style="text-align:left">在光标前插入文本</td></tr><tr><td>A</td><td style="text-align:left">在当前行尾插入文本</td></tr><tr><td>I</td><td style="text-align:left">在当前行首插入文本</td></tr><tr><td>o</td><td style="text-align:left">在当前行的下边插入新行</td></tr><tr><td>O</td><td style="text-align:left">在当前行的上边插入新行</td></tr></tbody></table><h2 id="删除文本"><a href="#删除文本" class="headerlink" title="删除文本"></a>删除文本</h2><table><thead><tr><th style="text-align:center">按键</th><th style="text-align:left">作用</th></tr></thead><tbody><tr><td style="text-align:center"> x或dl</td><td style="text-align:left">删除光标处的字符</td></tr><tr><td style="text-align:center">  nx</td><td style="text-align:left">从当前光标处往后删除n个字符</td></tr><tr><td style="text-align:center"> X或dh</td><td style="text-align:left">删除光标前的字符</td></tr><tr><td style="text-align:center">  nX</td><td style="text-align:left">从当前光标处往前删除n个字符</td></tr><tr><td style="text-align:center">   d</td><td style="text-align:left">剪切删除文字</td></tr><tr><td style="text-align:center">   D</td><td style="text-align:left">从光标定位的行末删除文本</td></tr><tr><td style="text-align:center">  dw</td><td style="text-align:left">删至下一个字的开头</td></tr><tr><td style="text-align:center">  ndw</td><td style="text-align:left">从当前光标处往后删除n个字</td></tr><tr><td style="text-align:center">  dG</td><td style="text-align:left">删除行，直到文件结束</td></tr><tr><td style="text-align:center">  dd</td><td style="text-align:left">删除整行</td></tr><tr><td style="text-align:center">  dj</td><td style="text-align:left">删除上一行</td></tr><tr><td style="text-align:center">  dk</td><td style="text-align:left">删除下一行</td></tr><tr><td style="text-align:center">  ndd</td><td style="text-align:left">从当前行开始往后删除n行</td></tr><tr><td style="text-align:center">  db</td><td style="text-align:left">删除光标前面的字</td></tr><tr><td style="text-align:center">  ndb</td><td style="text-align:left">从当前行开始往前删除n字</td></tr><tr><td style="text-align:center">  de</td><td style="text-align:left">删除一个单词</td></tr><tr><td style="text-align:center">  d$</td><td style="text-align:left">从光标处删除到行尾</td></tr><tr><td style="text-align:center">  d1G</td><td style="text-align:left">删除光标所在行到第一行的所有数据</td></tr><tr><td style="text-align:center">  dgg</td><td style="text-align:left">删除当前行到文件首部的所有行(包括当前行)</td></tr><tr><td style="text-align:center">  jdG</td><td style="text-align:left">删除当前行之后所有行（包括当前行）</td></tr><tr><td style="text-align:center"><code>:</code>n,md</td><td style="text-align:left">n到m行之间的行（可用%或0,$表示全文）</td></tr><tr><td style="text-align:center">CTRL+w</td><td style="text-align:left">插入模式下，删除前面的字</td></tr></tbody></table><h2 id="修改文本"><a href="#修改文本" class="headerlink" title="修改文本"></a>修改文本</h2><p>每个命令前面的数字表示该命令重复的次数</p><pre><code>按键       | 作用</code></pre><p>:———–: | :——————–<br>    rCHAR     | 用CHAR替换当前字符<br>      R       | 从当前字符开始替换直到按下Esc键<br>      s       | 删除当前字符并插入<br>    S或cc      | 取代光标所在整行<br>     cw       | 删除当前单词并插入<br>      C       | 删除光标处到行尾字符并插入<br>     cG       | 删除光标处到末尾并插入<br>    c0或c^     | 删除光标处到到行首并插入,不包括光标处字符<br><code>:</code>1, 10 m 20 | 将第1-10行移动到第20行之后<br>     <code>~</code>      | 交换大小写</p><h2 id="复制文本"><a href="#复制文本" class="headerlink" title="复制文本"></a>复制文本</h2><table><thead><tr><th style="text-align:center">按键</th><th style="text-align:left">作用</th></tr></thead><tbody><tr><td style="text-align:center">  yy或Y</td><td style="text-align:left">将当前行的内容放入临时缓冲区（yank命令）</td></tr><tr><td style="text-align:center">   nyy</td><td style="text-align:left">将n行的内容放入临时缓冲区</td></tr><tr><td style="text-align:center">   yw</td><td style="text-align:left">把光标当前所在的单词移到缓冲区</td></tr><tr><td style="text-align:center">   y$</td><td style="text-align:left">把当前行及其以前的所有文本移到缓冲区</td></tr><tr><td style="text-align:center">    p</td><td style="text-align:left">将临时缓冲区中的文本放入光标行下</td></tr><tr><td style="text-align:center">    P</td><td style="text-align:left">将临时缓冲区中的文本放入光标行上</td></tr><tr><td style="text-align:center">   ddp</td><td style="text-align:left">交换光标所在行和其下一行(dd剪切当前行，p粘贴当前行的下面)</td></tr><tr><td style="text-align:center">“(a-z)nyy</td><td style="text-align:left">复制n行放入名字为圆括号内的可命名缓冲区，省略n表示当前行</td></tr><tr><td style="text-align:center">“(a-z)ndd</td><td style="text-align:left">删除n行放入名字为圆括号内的可命名缓冲区，省略n表示当前行</td></tr><tr><td style="text-align:center"> “(a-z)p</td><td style="text-align:left">将名字为圆括号的可命名缓冲区的内容放入当前行后</td></tr><tr><td style="text-align:center"> “(a-z)P</td><td style="text-align:left">将名字为圆括号的可命名缓冲区的内容放入当前行前</td></tr></tbody></table><h2 id="撤消恢复"><a href="#撤消恢复" class="headerlink" title="撤消恢复"></a>撤消恢复</h2><table><thead><tr><th style="text-align:center">按键</th><th style="text-align:left">作用</th></tr></thead><tbody><tr><td style="text-align:center">  u</td><td style="text-align:left">撤消最后一次修改</td></tr><tr><td style="text-align:center">  U</td><td style="text-align:left">撤消当前行的所有修改</td></tr><tr><td style="text-align:center">  .</td><td style="text-align:left">重复最后一次修改</td></tr><tr><td style="text-align:center">CTRL+r</td><td style="text-align:left">恢复上一次的撤消</td></tr><tr><td style="text-align:center"> “np</td><td style="text-align:left">取回最后第n次的删除(缓冲区中存有一定次数的删除内容，一般为9)</td></tr></tbody></table><h2 id="查找与替换"><a href="#查找与替换" class="headerlink" title="查找与替换"></a>查找与替换</h2><pre><code>按键            | 作用</code></pre><p>:———————-: | :————————————<br>         /text           | 在文件中向前查找text，转义字：.<em>[]^%/?~$<br>         ?text           | 在文件中向后查找text<br>           n             | 在同一方向重复查找<br>           N             | 在相反方向重复查找<br>         fCHAR           | 行内向后查找<br>         FCHAR           | 行内向前查找<br>         nfCHAR          | 行内向后查找第三个CHAR<br>         ttext           | 在当前行向前查找text，并将光标定位在text的第一个字符<br>         Ttext           | 在当前行向后查找text，并将光标定位在text的第一个字符<br>          `</em><code>| 往后查找光标停留位置相同的词组</code>#<code>| 向前查找光标停留位置相同的词组           g*            | 向下部分匹配光标所在处的单词           g#            | 向上部分匹配光标所在处的单词</code>:<code>set ic         | 查找时忽略大小写</code>:<code>set noic        | 查找时对大小写敏感</code>:<code>nohlsearch       | 关闭当前的高亮显示，如果再次搜索或者按下n或N键，则会再次高亮。</code>:<code>set incsearch     | 逐步搜索模式，对当前键入的字符进行搜索而不必等待键入完成。</code>:<code>set wrapscan      | 重新搜索，在搜索到文件头或尾时，返回继续搜索，默认开启。</code>:<code>s/OLD/NEW       | 用NEW替换OLD，替换当前行的第一个匹配，/可换成%</code>:<code>s/OLD/NEW/g      | 用NEW替换OLD，替换当前行的所有匹配</code>:<code>m,ns/OLD/NEW      | 在m到n行，用NEW替换OLD,&quot;. ,$&quot; ：从当前行到文件尾</code>:<code>%s/OLD/NEW       | 全文用NEW替换OLD，替换所有行的第一个匹配</code>:<code>%s/OLD/NEW/g      | 全文替换指定字符串,将g改为c，就会询问是否替换,p 表示替代结果逐行显示           &amp;             | 重复最后的</code>:<code>s命令</code>:<code>g/text1/s/text2/text3 | 查找包含text1的行，用text3替换text2</code>:<code>g/text/command     | 在所有包含text的行运行command所表示的命令</code>:`v/text/command     | 在所有不包含text的行运行command所表示的命令</p><h2 id="重复"><a href="#重复" class="headerlink" title="重复"></a>重复</h2><table><thead><tr><th>按键</th><th style="text-align:left">作用</th></tr></thead><tbody><tr><td>,</td><td style="text-align:left">以相反的方向重复前面的f、F、t或T查找命令</td></tr><tr><td>;</td><td style="text-align:left">重复前面的f、F、t或T查找命令</td></tr><tr><td>n</td><td style="text-align:left">重复前面的/或?查找命令</td></tr><tr><td>N</td><td style="text-align:left">以相反方向重复前面的/或?命令</td></tr></tbody></table><h2 id="保存和退出"><a href="#保存和退出" class="headerlink" title="保存和退出"></a>保存和退出</h2><pre><code>按键      | 作用</code></pre><p>:———: | :——————<br>   <code>:</code>w     | 保存不退出<br>   <code>:</code>w！    | 强制保存不退出<br> <code>:</code>w file  | 将修改保存为file不退出<br><code>:</code>wq或ZZ或:x | 保存文件并退出vi<br>  <code>:</code>wq!    | 强行保存退出<br>  <code>:</code>wqa    | 保存所有文件<br> <code>:</code>q!或ZQ   | 不保存文件，退出vi<br>   <code>:</code>e     | 加载最新文件内容<br> <code>:</code>e file  | 把指定文件载入vi 进行编辑<br>   <code>:</code>e!    | 放弃所有修改，从上次保存文件开始再编辑</p><h2 id="vi中的选项"><a href="#vi中的选项" class="headerlink" title="vi中的选项"></a>vi中的选项</h2><pre><code>按键        | 作用</code></pre><p>:————-: | :—————<br>  <code>:</code>set all    | 打印所有选项<br><code>:</code>set nooption | 关闭option选项<br>   <code>:</code>set nu    | 每行前打印行号<br><code>:</code>set showmode | 显示是输入模式还是替换模式<br>  <code>:</code>set noic   | 查找时忽略大小写<br>  <code>:</code>set list   | 显示制表符(^I)和行尾符号<br>  <code>:</code>set ts=8   | 为文本输入设置tab stops<br><code>:</code>set window=n | 设置文本窗口显示n行</p><h2 id="vi命令"><a href="#vi命令" class="headerlink" title="vi命令"></a>vi命令</h2><table><thead><tr><th style="text-align:center">按键</th><th style="text-align:left">作用</th></tr></thead><tbody><tr><td style="text-align:center"><code>:</code>.=</td><td style="text-align:left">打印当前行的行号</td></tr><tr><td style="text-align:center"><code>:</code>=</td><td style="text-align:left">打印文件中的行数</td></tr><tr><td style="text-align:center"><code>:</code>l</td><td style="text-align:left">使用字母”l”来显示许多的特殊字符，如制表符和换行符</td></tr></tbody></table><h2 id="在文本中定位段落和放置标记"><a href="#在文本中定位段落和放置标记" class="headerlink" title="在文本中定位段落和放置标记"></a>在文本中定位段落和放置标记</h2><table><thead><tr><th style="text-align:center">按键</th><th style="text-align:left">作用</th></tr></thead><tbody><tr><td style="text-align:center">  {</td><td style="text-align:left">在第一列插入{来定义一个段落</td></tr><tr><td style="text-align:center">  [[</td><td style="text-align:left">回到段落的开头处</td></tr><tr><td style="text-align:center">  ]]</td><td style="text-align:left">向前移到下一个段落的开头处</td></tr><tr><td style="text-align:center">m(a-z)</td><td style="text-align:left">用一个字母来标记当前位置，如用mz表示标记z</td></tr><tr><td style="text-align:center">‘(a-z)</td><td style="text-align:left">将光标移动到指定的标记，如用’z表示移动到z</td></tr></tbody></table><h2 id="在vi中连接行"><a href="#在vi中连接行" class="headerlink" title="在vi中连接行"></a>在vi中连接行</h2><table><thead><tr><th>按键</th><th style="text-align:left">作用</th></tr></thead><tbody><tr><td>J</td><td style="text-align:left">将下一行连接到当前行的末尾</td></tr><tr><td>nJ</td><td style="text-align:left">连接后面n行</td></tr></tbody></table><h2 id="vi中的shell转义命令"><a href="#vi中的shell转义命令" class="headerlink" title="vi中的shell转义命令"></a>vi中的shell转义命令</h2><pre><code>按键        | 作用</code></pre><p>:————-: | :————————————————<br>  <code>:</code>!command   | 执行shell的command命令，如:!ls<br>     <code>:</code>!!      | 执行前一个shell命令<br> <code>:</code>r!command   | 读取command命令的输入并插入，如:r!ls会先执行ls，然后读入内容<br> <code>:</code>w!command   | 将当前已编辑文件作为command命令的标准输入并执行command命令，如:w!grep all<br><code>:</code>cd directory | 将当前工作目录更改为directory所表示的目录<br>     <code>:</code>sh      | 将启动一个子shell，使用^d(ctrl+d)返回vi<br>  <code>:</code>so file    | 在shell程序file中读入和执行命令</p><h2 id="vi中的宏与缩写"><a href="#vi中的宏与缩写" class="headerlink" title="vi中的宏与缩写"></a>vi中的宏与缩写</h2><p>(避免使用控制键和符号，不要使用字符K、V、g、q、v、*、=和功能键)</p><pre><code>按键           | 作用</code></pre><p>:——————-: | :—————————————————————————-<br> <code>:</code>map key commands  | 定义一个键来运行commands，如:map e ea，可以用e移到一个字的末尾来追加文本<br>       <code>:</code>map         | 在状态行显示所有已定义的宏<br>     <code>:</code>umap key      | 删除该键的宏<br><code>:</code>ab string1 string2 | 定义一个缩写，使得当插入string1时，用string2替换string1。当要插入文本时，键入string1然后按Esc键，系统就插入了string2<br>        <code>:</code>ab         | 显示所有缩写<br>    <code>:</code>una string     | 取消string的缩写</p><h2 id="在vi中缩进文本"><a href="#在vi中缩进文本" class="headerlink" title="在vi中缩进文本"></a>在vi中缩进文本</h2><pre><code>按键              | 作用</code></pre><p>:————————-: | :———————–<br>        CTRL+i或tab          | 插入模式，插入移动的宽度，移动宽度是事先定义好的<br>         <code>:</code>set ai          | 打开自动缩进<br>        <code>:</code>set sw=n         | 将移动宽度设置为n个字符<br>         n&lt;&lt;或&gt;n&gt;&gt;           | 使往下n行都向左（右）移动一个设定宽度<br>            ==              | 自动缩进当前行<br>: cd C:\Users\Hello\Desktop | 切换目录</p><h2 id="vim配置"><a href="#vim配置" class="headerlink" title="vim配置"></a>vim配置</h2><h3 id="vimrc"><a href="#vimrc" class="headerlink" title="vimrc"></a>vimrc</h3><p>windows下，打开gvim,使用<code>:vi $vim/_vimrc</code>打开配置文件</p><p>linux下，使用<code>vi ~/.vimrc</code>打开配置文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">set nocompatible            &quot;不要使用vi的键盘模式，而是vim自己的</span><br><span class="line">set gfn=Consolas:h12            &quot;字体，大小</span><br><span class="line">set nu            &quot;显示行号</span><br><span class="line">set list            &quot;显示TAB</span><br><span class="line">set cursorline            &quot;突出显示当前行&quot;为光标所在行加下划线</span><br><span class="line">set encoding=utf-8            &quot;编码</span><br><span class="line">set fileencodings=uft-8,gbk            &quot;使用utf-8或gbk打开文件</span><br><span class="line">filetype on            &quot;侦测文件类型</span><br><span class="line"></span><br><span class="line">set shortmess=atI            &quot;不进入默认首页</span><br><span class="line">set showcmd            &quot;显示命令行</span><br><span class="line"></span><br><span class="line">&quot;set backup            &quot;保留备份文件</span><br><span class="line">&quot;set backupdir=$VIM/backup/            &quot;保存备份到backup</span><br><span class="line">set nobackup            &quot;不保留备份文件</span><br><span class="line">set noundofile            &quot;不保留un~文件</span><br><span class="line">set noswapfile            &quot;不生成swap文件</span><br><span class="line"></span><br><span class="line">set ruler            &quot;打开状态栏标尺</span><br><span class="line">set laststatus=2            &quot;总是显示状态行</span><br><span class="line">set showtabline=1            &quot;标签栏的显示，0永远不显示 1两个以上显示 2 永远显示</span><br><span class="line">set statusline=%F%m%r%h%w\[POS=%l,%v][%p%%]\%&#123;strftime(\&quot;%d/%m/%y\ -\ %H:%M\&quot;)&#125;   &quot;我的状态行显示的内容（包括文件类型和解码）</span><br><span class="line"></span><br><span class="line">set nowrapscan            &quot;禁止在搜索到文件两端时重新搜索</span><br><span class="line">set incsearch            &quot;输入搜索内容时就显示搜索结果</span><br><span class="line">set ignorecase            &quot;检索时忽略大小写</span><br><span class="line">set hlsearch            &quot;搜索时高亮显示被找到的文本</span><br><span class="line"></span><br><span class="line">set autoread            &quot;当文件在外部被修改时，自动重新读取</span><br><span class="line"></span><br><span class="line">colorscheme desert            &quot;设定配色方案</span><br><span class="line">syntax enable            &quot;打开格式设置</span><br><span class="line">syntax on            &quot;自动语法高亮</span><br><span class="line"></span><br><span class="line">set ai            &quot;自动缩进</span><br><span class="line">set showmatch            &quot;代码匹配&quot;高亮显示匹配的括号</span><br><span class="line">set matchtime=5            &quot;匹配括号高亮的时间（单位是十分之一秒）</span><br><span class="line"></span><br><span class="line">set expandtab            &quot;4个空格代替tab</span><br><span class="line">set softtabstop=4            &quot;统一缩进长度为4</span><br><span class="line">set shiftwidth=4            &quot;自动缩进长度为4</span><br><span class="line">set tabstop=4            &quot;设定 tab 长度为4</span><br><span class="line"></span><br><span class="line">set helplang=cn            &quot;帮助系统设置为中文</span><br><span class="line"></span><br><span class="line">&quot;set nowrap            &quot;不要换行</span><br><span class="line"></span><br><span class="line">set foldmethod=syntax            &quot;代码折叠</span><br><span class="line">set fdm=indent            &quot;代码折叠</span><br><span class="line">set foldlevel=100            &quot;启动vim时不要自动折叠代码</span><br><span class="line">nnoremap &lt;space&gt; zo            &quot;代码折叠快捷键</span><br><span class="line"></span><br><span class="line">set formatoptions=tcrqn            &quot;自动格式化</span><br><span class="line">set autoindent            &quot;继承前一行的缩进方式，特别适用于多行注释</span><br><span class="line">set smartindent            &quot;为C程序提供自动缩进</span><br><span class="line">set cindent            &quot;使用C样式的缩进</span><br><span class="line">set smarttab            &quot;在行和段开始处使用制表符</span><br><span class="line"></span><br><span class="line">set scrolloff=1            &quot;光标移动到buffer的顶部和底部时保持n行距离</span><br><span class="line">set novisualbell            &quot;不要闪烁</span><br><span class="line"></span><br><span class="line">set report=0            &quot;通过使用: commands命令，告诉我们文件的哪一行被改变过</span><br><span class="line">set noerrorbells            &quot;不让vim发出滴滴声</span><br><span class="line">set fillchars=vert:\ ,stl:\            &quot;在被分割的窗口间显示空白，便于阅读 ,stlnc:加了这个wm分割兰有\\</span><br><span class="line">set mouse=a            &quot;可以在buffer的任何地方使用鼠标（类似office中在工作区双击鼠标定位）</span><br><span class="line">set selection=exclusive            &quot;选择模式为单独</span><br><span class="line">set selectmode=mouse,key            &quot;选择方式为鼠标键盘</span><br><span class="line"></span><br><span class="line">set viminfo+=!            &quot;保存全局变量</span><br><span class="line">set history=300            &quot;history文件中需要记录的行数</span><br><span class="line"></span><br><span class="line">set magic            &quot;设置正表达式</span><br><span class="line">set backspace=indent,eol,start  &quot;这指明在插入模式下在哪里允许 &lt;BS&gt; 删除光标前面的字符&quot;逗号分隔的三个值分别指：行首的空白字符，换行符和插入模式开始处之前的字符。</span><br><span class="line"></span><br><span class="line">let Tlist_Show_One_File=1    &quot;不同时显示多个文件的tag，只显示当前文件的</span><br><span class="line">let Tlist_Exit_OnlyWindow=1    &quot;如果taglist窗口是最后一个窗口,则退出vim</span><br><span class="line">let autosave=15            &quot;15s,自动保存文件</span><br><span class="line"></span><br><span class="line">au BufRead,BufNewFile,BufEnter * cd %:p:h &quot;自动切换目录为当前编辑文件所在目录</span><br><span class="line">&quot;保存到指定文档</span><br><span class="line">if has(isdirectory(&apos;$HOME\Desktop\&apos;))</span><br><span class="line">    exec &apos;cd &apos; . fnameescape(&apos;$HOME\Desktop\&apos;)</span><br><span class="line"></span><br><span class="line">if has(&quot;gui_running&quot;)            &quot;如果是图形界面</span><br><span class="line">    set guioptions=m            &quot;关闭菜单栏</span><br><span class="line">    set guioptions=t            &quot;关闭工具栏</span><br><span class="line">&quot;    set guioptions=L            &quot;启动左边的滚动条</span><br><span class="line">&quot;    set guioptions+=r            &quot;启动右边的滚动条</span><br><span class="line">&quot;    set guioptions+=b            &quot;启动下边的滚动条</span><br><span class="line">    set clipboard+=unnamed            &quot;共享剪贴板</span><br><span class="line">endif</span><br><span class="line">&quot;if has(&quot;win32&quot;)</span><br><span class="line">&quot;    colorscheme torte    &quot;torte配色方案</span><br><span class="line">&quot;    set guifont=Consolas:h12 &quot;字体和大小</span><br><span class="line">&quot;endif</span><br><span class="line"></span><br><span class="line">&quot;--------------end self config-------------------</span><br></pre></td></tr></table></figure><p>自动打开上一个文本</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&quot;Go to last file(s) if invoked without arguments.</span><br><span class="line">autocmd VimLeave * nested if (!isdirectory($HOME . &quot;/.vim&quot;)) |</span><br><span class="line">    \ call mkdir($HOME . &quot;/.vim&quot;) |</span><br><span class="line">    \ endif |</span><br><span class="line">    \ execute &quot;mksession! &quot;. $HOME . &quot;/.vim/Session.vim&quot;</span><br><span class="line"></span><br><span class="line">autocmd VimEnter * nested if argc() == 0 &amp;&amp; filereadable($HOME . &quot;/.vim/Session.vim&quot;) |</span><br><span class="line">    \ execute &quot;source &quot;. $HOME . &quot;/.vim/Session.vim&quot;</span><br></pre></td></tr></table></figure><p>文件管理器设置</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;MiniBufExplorer</span><br><span class="line">let g:miniBufExplMapWindowNavVim = 1</span><br><span class="line">let g:miniBufExplMapWindowNavArrows = 1</span><br><span class="line">let g:miniBufExplMapCTabSwitchBufs = 1</span><br><span class="line">let g:miniBufExplModSelTarget = 1</span><br></pre></td></tr></table></figure><h2 id="gvim不生成备份文件"><a href="#gvim不生成备份文件" class="headerlink" title="gvim不生成备份文件"></a>gvim不生成备份文件</h2><p>打开vimrc_example.vim文件，找到下面的代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if has(&quot;vms&quot;)</span><br><span class="line">    set nobackup &quot;do not keep a backup file, use versions instead</span><br><span class="line">else</span><br><span class="line">    set backup &quot;keep a backup file</span><br><span class="line">endif</span><br></pre></td></tr></table></figure><p>注释掉else后面的内容</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;写在前面&quot;&gt;&lt;a href=&quot;#写在前面&quot; class=&quot;headerlink&quot; title=&quot;写在前面&quot;&gt;&lt;/a&gt;写在前面&lt;/h2&gt;&lt;p&gt;内容来自网络总结&lt;/p&gt;
&lt;h2 id=&quot;状态模式&quot;&gt;&lt;a href=&quot;#状态模式&quot; class=&quot;headerlink&quot; 
      
    
    </summary>
    
      <category term="tools" scheme="http://yoursite.com/categories/tools/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="vim" scheme="http://yoursite.com/tags/vim/"/>
    
  </entry>
  
  <entry>
    <title>vimium</title>
    <link href="http://yoursite.com/2018/tools%20vimium.html"/>
    <id>http://yoursite.com/2018/tools vimium.html</id>
    <published>2018-12-12T00:00:00.000Z</published>
    <updated>2019-11-22T08:42:10.161Z</updated>
    
    <content type="html"><![CDATA[<pre><code>command       | en                                               | cn</code></pre><p>:—————–: | :———————————————– | :—————————<br>Navigating the page | —                                              | —<br>    j, <code>&lt;</code>c-e&gt;      | Scroll down                                      | 向下移动（CTRL+e）<br>    k, <code>&lt;</code>c-y&gt;      | Scroll up                                        | 向上移动（CTRL+y）<br>        gg          | Scroll to the top of the page                    | 跳到页面顶部<br>         G          | Scroll to the bottom of the page                 | 跳到页面底部<br>         d          | Scroll a half page down                          | 向下翻页<br>         u          | Scroll a half page up                            | 向上翻页<br>         h          | Scroll left                                      | 向左移动<br>         l          | Scroll right                                     | 向右移动<br>        zH          | Scroll all the way to the left                   | 移动到最左<br>        zL          | Scroll all the way to the right                  | 移动到最右<br>         r          | Reload the page                                  | 刷新页面<br>        yy          | Copy the current URL to the clipboard            | 拷贝当前页面的URL到剪贴板<br>         p          | Open the clipboard’s URL in the current tab      | 在当前页打开剪贴板的地址<br>         P          | Open the clipboard’s URL in a new tab            | 在新页面打开剪贴板的地址<br>        gu          | Go up the URL hierarchy                          | 跳转到父页面（url往上一个/）<br>        gU          | Go to root of current URL hierarchy              | 跳转到根页面（url的hosts一级）<br>         i          | Enter insert mode                                | 插入模式<br>         v          | Enter visual mode                                | 可视模式<br>         V          | Enter visual line mode                           | 行可视模式<br>        gi          | Focus the first text input on the page           | 到第一个文本框插入<br>         f          | Open a link in the current tab                   | Hint模式，在本页面打开待选择的链接<br>         F          | Open a link in a new tab                         | Hint模式，在新页面打开待选择的链接<br>      <code>&lt;</code>a-f&gt;       | Open multiple links in a new tab                 | Hint模式，在新页面打开待选择的多个链接（ALT+f）<br>        yf          | Copy a link URL to the clipboard                 | 拷贝某一个URL到剪贴板（y拷f选择，选择后生效）<br>        [[          | Follow the link labeled previous or &lt;            | 转到当前页之前标记的链接<br>        ]]          | Follow the link labeled next or &gt;                | 转到当前页之后标记的链接<br>        gf          | Select the next frame on the page                | 到当前页面的下一层框架<br>        gF          | Select the page’s main/top frame                 | 到当前页面的最上层框架<br>         m          | Create a new mark                                | 创建一个标记（按下后，接一个字母）<br>         <code>| Go to a mark                                     | 跳到一个标记（按下后，接用m标记过的字母）                    | **Using the vomnibar**                           |         o          | Open URL, bookmark or history entry              | 在当前页打开网址，书签，历史记录         O          | Open URL, bookmark or history entry in a new tab | 在新页面打开网址，书签，历史记录         b          | Open a bookmark                                  | 在当前页打开书签         B          | Open a bookmark in a new tab                     | 在新的标签页打开书签         T          | Search through your open tabs                    | 在所有打开的标签页查找跳转        ge          | Edit the current URL                             | 编辑当前地址，回车在本页面打开        gE          | Edit the current URL and open in a new tab       | 编辑当前地址，回车在新页面打开                    | **Using find**                                   |         /          | Enter find mode                                  | 查找         n          | Cycle forward to the next find match             | 向下查找内容         N          | Cycle backward to the previous find match        | 向上查找内容                    | **Navigating history**                           |         H          | Go back in history                               | 退到上一个历史页面         L          | Go forward in history                            | 进到下一个历史页面                    | **Manipulating tabs**                            |         t          | Create new tab                                   | 创建一个新的标签页       J, gT        | Go one tab left                                  | 跳转到右边的一个标签页       K, gt        | Go one tab right                                 | 跳转到右边的一个标签页         ^          | Go to previously-visited tab                     | 切换到之前浏览在窗口        g0          | Go to the first tab                              | 移动到第一个标签页        g$          | Go to the last tab                               | 移动到最后一个标签页        yt          | Duplicate current tab                            | 复制当前页到新标签页</code>&lt;<code>a-p&gt;       | Pin or unpin current tab                         | 使当前页的标签最小化（再按还原）</code>&lt;<code>a-m&gt;       | Mute or unmute current tab                       | 使当前页静音（再按取消静音）         x          | Close current tab                                | 关闭当前的标签页         X          | Restore closed tab                               | 恢复刚刚关闭的标签页         W          | Move tab to new window                           | 移动标签页到新窗口        &lt;&lt;          | Move tab to the left                             | 往左移动标签页</code>&gt;`&gt;         | Move tab to the right                            | 往右移动标签页<br>                    | <strong>Miscellaneous</strong>                                |<br>         ?          | Show help                                        | 显示命令帮助（再按关闭）<br>        gs          | View page source                                 | 查看页面源代码</p><p>F6定位并选择地址栏</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;pre&gt;&lt;code&gt;command       | en                                               | cn
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;:—————–: | :———————————————– | :—————————&lt;b
      
    
    </summary>
    
      <category term="tools" scheme="http://yoursite.com/categories/tools/"/>
    
    
      <category term="vimium" scheme="http://yoursite.com/tags/vimium/"/>
    
      <category term="browser" scheme="http://yoursite.com/tags/browser/"/>
    
  </entry>
  
  <entry>
    <title>Windows 在apache中使用mod_wsgi部署flask</title>
    <link href="http://yoursite.com/2018/windows%20apache%20python%20wsgi.html"/>
    <id>http://yoursite.com/2018/windows apache python wsgi.html</id>
    <published>2018-12-12T00:00:00.000Z</published>
    <updated>2019-11-22T08:42:10.163Z</updated>
    
    <content type="html"><![CDATA[<ol><li><p>下载mod_wsgi Python的插件，选择 mod_wsgi-4.5.24+ap24vc14-cp37-cp37m-win_amd64.whl，</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://www.lfd.uci.edu/~gohlke/pythonlibs/#mod_wsgi</span><br><span class="line"></span><br><span class="line">https://download.lfd.uci.edu/pythonlibs/h2ufg7oq/mod_wsgi-4.5.24+ap24vc14-cp37-cp37m-win_amd64.whl</span><br></pre></td></tr></table></figure></li><li><p>在下载时要选择相应的版本，否则Apache启动时会有问题<br><br><strong><em>Apache24 VC是14</em></strong><br><br><strong><em>Python3.7</em></strong><br><br><strong><em>64位</em></strong></p></li><li><p>把下载的.whl文件复制到python37/Scripts下，命令行执行</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install "mod_wsgi-<span class="number">4</span>.<span class="number">5</span>.<span class="number">24</span>+ap24vc14-cp37-cp37m-win_amd64.whl"</span><br></pre></td></tr></table></figure></li><li><p>安装成功，python37/Scripts下命令行执行</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mod_wsgi-express module-config</span><br></pre></td></tr></table></figure></li><li><p>输出如下三行结果</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">LoadFile &quot;d:/ide/python37/python37.dll&quot;</span><br><span class="line">LoadModule wsgi_module &quot;d:/ide/python37/lib/site-packages/mod_wsgi/server/mod_wsgi.cp37-win_amd64.pyd&quot;</span><br><span class="line">WSGIPythonHome &quot;d:/ide/python37&quot;</span><br></pre></td></tr></table></figure></li><li><p>把这三行内容复制到apache的conf路径下http.cnf文件下进行配置</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#############################</span><br><span class="line"># 配置python下wsgi</span><br><span class="line">LoadFile &quot;D:/IDE/Python37/python37.dll&quot;</span><br><span class="line">LoadModule wsgi_module &quot;D:/IDE/Python37/lib/site-packages/mod_wsgi/server/mod_wsgi.cp37-win_amd64.pyd&quot;</span><br><span class="line">WSGIPythonHome &quot;D:/IDE/Python37&quot;</span><br><span class="line"></span><br><span class="line"># 监听端口</span><br><span class="line">Listen 81</span><br><span class="line"># python项目的根目录和wsgi路径</span><br><span class="line">&lt;VirtualHost *:81&gt;</span><br><span class="line">DocumentRoot  &quot;D:/IDE/WorkSpace/Python/flask_test/&quot;</span><br><span class="line">ServerName localhost:81</span><br><span class="line">WSGIScriptAlias / &quot;D:/IDE/WorkSpace/Python/flask_test/flask_wsgi.py&quot;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line"># 虚拟目录的权限配置</span><br><span class="line">&lt;Directory &quot;D:/IDE/WorkSpace/Python/flask_test/&quot;&gt;</span><br><span class="line"> Options Indexes FollowSymLinks</span><br><span class="line"> AllowOverride None</span><br><span class="line"> Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line">##############################</span><br></pre></td></tr></table></figure></li><li><p>注释http.cnf中的mod_wsgi.so（如果有）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#LoadModule wsgi_module modules/mod_wsgi.so</span><br></pre></td></tr></table></figure></li><li><p>安装apache服务器，进入D:\IDE\Apache24\bin目录，执行如下命令安装</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">httpd.exe -k install</span><br><span class="line"># httpd.exe -k uninstall</span><br></pre></td></tr></table></figure><p>执行如下命令检查</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">D:\<span class="title">IDE</span>\<span class="title">Apache24</span>\<span class="title">bin</span>&gt;<span class="title">httpd.exe</span> -<span class="title">n</span> "<span class="title">Apache2</span>.4" -<span class="title">t</span></span></span><br></pre></td></tr></table></figure></li><li><p>以服务启动</p></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ol&gt;
&lt;li&gt;&lt;p&gt;下载mod_wsgi Python的插件，选择 mod_wsgi-4.5.24+ap24vc14-cp37-cp37m-win_amd64.whl，&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td cl
      
    
    </summary>
    
      <category term="windows" scheme="http://yoursite.com/categories/windows/"/>
    
    
      <category term="windows" scheme="http://yoursite.com/tags/windows/"/>
    
      <category term="apache wsgi" scheme="http://yoursite.com/tags/apache-wsgi/"/>
    
      <category term="flask" scheme="http://yoursite.com/tags/flask/"/>
    
  </entry>
  
  <entry>
    <title>win10 下 安装 mysql 8</title>
    <link href="http://yoursite.com/2018/windows%20install%20mysql.html"/>
    <id>http://yoursite.com/2018/windows install mysql.html</id>
    <published>2018-12-12T00:00:00.000Z</published>
    <updated>2019-11-22T08:49:28.636Z</updated>
    
    <content type="html"><![CDATA[<ol><li><p>首先去官网下载安装包</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://dev.mysql.com/downloads/mysql/</span><br></pre></td></tr></table></figure></li><li><p>解压mysql到你安装的目录：E:/DB/mysql-8.0.11</p></li><li><p>在E:/DB/mysql-8.0.11文件夹下面新建一个my.ini文件,内容如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line"># 设置3306端口</span><br><span class="line">port=3306</span><br><span class="line"># 设置mysql的安装目录</span><br><span class="line">basedir=E:/DB/mysql-8.0.11</span><br><span class="line"># 设置mysql数据库的数据的存放目录</span><br><span class="line">datadir=E:/DB/mysql-8.0.11/data</span><br><span class="line"># 允许最大连接数</span><br><span class="line">max_connections=200</span><br><span class="line"># 允许连接失败的次数。这是为了防止有人从该主机试图攻击数据库系统</span><br><span class="line">max_connect_errors=10</span><br><span class="line"># 服务端使用的字符集默认为UTF8</span><br><span class="line">character-set-server=utf8</span><br><span class="line"># 创建新表时将使用的默认存储引擎</span><br><span class="line">default-storage-engine=INNODB</span><br><span class="line">[mysql]</span><br><span class="line"># 设置mysql客户端默认字符集</span><br><span class="line">default-character-set=utf8</span><br><span class="line">[client]</span><br><span class="line"># 设置mysql客户端连接服务端时默认使用的端口</span><br><span class="line">port=3306</span><br><span class="line">default-character-set=utf8</span><br></pre></td></tr></table></figure></li><li><p>到E:/DB/mysql-8.0.11/bin路径下，以管理员的身份打开cmd窗口，执行初始化命令</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld --initialize --user=mysql --console</span><br></pre></td></tr></table></figure><p><em>一定要进行初始化,注意把临时密码记住</em></p></li><li><p>输入如下命令，进行服务的添加</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld -install</span><br></pre></td></tr></table></figure></li><li><p>输入如下命令，启动服务</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">net</span> <span class="built_in">start</span> mysql</span><br></pre></td></tr></table></figure></li><li><p>输入如下命令，进行登录数据库，用上面记住的密码登录</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure></li><li><p>输入如下命令，，修改密码语句：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> root@localhost <span class="keyword">IDENTIFIED</span>  <span class="keyword">BY</span> <span class="string">'root'</span>;</span><br><span class="line"><span class="comment">#修改密码为：root</span></span><br></pre></td></tr></table></figure></li><li><p>修改密码验证方式</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> <span class="string">'root'</span>@<span class="string">'localhost'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">WITH</span> mysql_native_password <span class="keyword">BY</span> <span class="string">'root'</span>;</span><br></pre></td></tr></table></figure></li></ol><h1 id="备注"><a href="#备注" class="headerlink" title="_备注_"></a><strong>_备注_</strong></h1><h2 id="8-0之前版本，忘记密码修改方法"><a href="#8-0之前版本，忘记密码修改方法" class="headerlink" title="8.0之前版本，忘记密码修改方法"></a>8.0之前版本，忘记密码修改方法</h2><ol><li><p>找到bin目录：执行</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld --skip-grant-tables</span><br></pre></td></tr></table></figure></li><li><p>重新在开一个cmd窗口在bin目录执行</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql</span><br></pre></td></tr></table></figure></li><li><p>就进入登陆状态了</p></li></ol><h2 id="5-7-22修改密码"><a href="#5-7-22修改密码" class="headerlink" title="5.7.22修改密码"></a>5.7.22修改密码</h2><ol><li><p>执行</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> authentication_string=<span class="keyword">password</span>(<span class="string">'123456'</span>) <span class="keyword">where</span> <span class="keyword">user</span>=<span class="string">'root'</span> <span class="keyword">and</span> host=<span class="string">'localhost'</span>;</span><br></pre></td></tr></table></figure></li></ol><h2 id="5-6-修改密码"><a href="#5-6-修改密码" class="headerlink" title="5.6.修改密码"></a>5.6.修改密码</h2><ol><li><p>执行：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> <span class="keyword">password</span>=<span class="keyword">password</span>(<span class="string">'123456'</span>) <span class="keyword">where</span> <span class="keyword">user</span>=<span class="string">'root'</span> <span class="keyword">and</span> host=<span class="string">'localhost'</span>;</span><br></pre></td></tr></table></figure></li></ol><h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><p>在cmd 下mysql服务mysql服务无法启动</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld --console</span><br></pre></td></tr></table></figure><h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><p>max_connect_errors = 10</p><p>配置说明</p><p>当此值设置为10时，意味着如果某一客户端尝试连接此MySQL服务器，但是失败10次，则MySQL会阻止此客户端连接。<br><br>重置此计数器的值，必须重启MySQL服务器<br><br>或者执行<code>FLUSH HOSTS;</code></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ol&gt;
&lt;li&gt;&lt;p&gt;首先去官网下载安装包&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td 
      
    
    </summary>
    
      <category term="windows" scheme="http://yoursite.com/categories/windows/"/>
    
    
      <category term="windows" scheme="http://yoursite.com/tags/windows/"/>
    
      <category term="mysql 8" scheme="http://yoursite.com/tags/mysql-8/"/>
    
  </entry>
  
</feed>
